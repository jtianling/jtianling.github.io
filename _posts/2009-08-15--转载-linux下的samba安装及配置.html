---
layout: post
title: "【转载】linux下的samba安装及配置"
categories:
- Linux
tags:
- Linux
- Samba
status: publish
type: post
published: true
meta:
  ratings_users: '0'
  ratings_score: '0'
  ratings_average: '0'
  views: '17'
author:
  login: jtianling
  email: jtianling@gmail.com
  display_name: jtianling
  first_name: ''
  last_name: ''
---

<p>以前配置samba一直是我的噩梦，甚至一度放弃samba，直接使用ssh+winscp来管理文件，今天找到一篇好文，顺利配置成功，感谢原作者。</p>
<p>在Ubuntu中设置samba共享可读写文件夹 收藏 <br />首先当然是要安装samba了，呵呵： 代码: <br />sudo apt-get install samba sudo apt-get install smbfs <br />下面我们来共享群组可读写文件夹，假设你要共享的文件夹为： /home/ray/share 首先创建这个文件夹 代码: <br />mkdir /home/ray/share chmod 777 /home/ray/share <br />备份并编辑smb.conf允许网络用户访问 代码: <br />sudo cp /etc/samba/smb.conf /etc/samba/smb.conf_backup sudo gedit /etc/samba/smb.conf <br />搜寻这一行文字 代码: <br />; security = user <br />用下面这几行取代 代码: <br />security = user username map = /etc/samba/smbusers <br />将下列几行新增到文件的最后面，假设允许访问的用户为：newsfan。而文件夹的共享名为 Share 代码: <br />[Share] comment = Shared Folder with username and password path = /home/ray/share public = yes writable = yes valid users = newsfan create mask = 0700 directory mask = 0700 force user = nobody force group = nogroup available = yes browseable = yes <br />然后顺便把这里改一下，找到［global］把 workgroup = MSHOME 改成 代码: <br />workgroup = WORKGROUP display charset = UTF-8 unix charset = UTF-8 dos charset = cp936 <br />后面的三行是为了防止出现中文目录乱码的情况。其中根据你的local，UTF-8 有可能需要改成 cp936。自己看着办吧。 现在要添加newsfan这个网络访问帐户。如果系统中当前没有这个帐户，那么 代码: <br />sudo useradd newsfan <br />要注意，上面只是增加了newsfan这个用户，却没有给用户赋予本机登录密码。所以这个用户将只能从远程访问，不能从本机登录。而且samba的登录密码可以和本机登录密码不一样。 现在要新增网络使用者的帐号： 代码: <br />sudo smbpasswd -a newsfan sudo gedit /etc/samba/smbusers <br />在新建立的文件内加入下面这一行并保存 代码: <br />newsfan = "network username" <br />如果将来需要更改newsfan的网络访问密码，也用这个命令更改 代码: <br />sudo smbpasswd -a newsfan <br />删除网络使用者的帐号的命令把上面的 -a 改成 -x 代码: <br />sudo testparm sudo /etc/init.d/samba restart <br />最后退出重新登录或者重新启动一下机器。</p>
<p>本文来自CSDN博客，转载请标明出处：<a href="http://blog.csdn.net/joliny/archive/2008/07/13/2646420.aspx">http://blog.csdn.net/joliny/archive/2008/07/13/2646420.aspx</a></p>
<p>&nbsp;</p>
<p>另外还有两篇备用的：</p>
<p>第一篇：</p>
<div>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';"><span style="font-family: 宋体; font-size: 12pt; mso-bidi-font-family: 宋体; mso-ansi-language: EN-US; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;">以<span lang="EN-US">root</span>根用户进行操作，如果您不是，请在每条命令前加上<span lang="EN-US">sudo</span></span></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">步骤</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">1:</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">安装</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">samba <br />#apt-get install samba <br />#apt-get install smbfs </p>
<p></span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">步骤</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">2:</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">添加</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">linux</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">用户</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US"> <br />#useradd user1</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">　　　　　</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">//</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">添加用户名</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">user1 <br />#passwd user1 //</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">给用户名</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">user1</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">添加密码</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US"> <br />#mkdir /home/user1 //</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">建立</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">user1</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">的</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">home</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">目录，如果不用这个用户名来登陆</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">linux</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">，此步骤不是必需</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US"> <br />#chown -R user1:user1 /home/user1</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">　　　</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">//</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">给</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">user1</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">的</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">home</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">目录设置好权限</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US"> </p>
<p></span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">步骤</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">3</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">：给</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">samba</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">服务器添加用户</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US"> <br /></span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">说明：登陆</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">samba</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">的用户必须已经是</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">linux</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">中的用户</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US"> <br />#smbpasswd -a user1 //</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">添加并给</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">user1</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">设置</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">samba</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">密码</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US"> </p>
<p></span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">步骤</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">4</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">：</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">smb.conf</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">设置</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US"> <br />#cd /etc/samb //</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">进入设置目录</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US"> <br />#mv smb.conf</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">　</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">smb.conf.bak //</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">做好备份，直接将系统默认配置文件改名</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US"> <br />#vim smb.conf //</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">建立和配置</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">smb.conf</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">文件</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US"> </p>
<p>[global] <br />workgroup=x1 //X1</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">为你局域网中的工作组名</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US"> <br />server string=x2 //x2</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">为你</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">linux</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">主机描述性文字，比如：</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">samba server</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">。</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US"> <br />security=user //samba</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">的安全等级，</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">user</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">代表需要输入用户名和密码，改成</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">share</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">则不需要输入用户名和密码</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US"> </p>
<p>[x3] //</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">方框号中的</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">x3</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">这个名字可以随便取，只是在</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">win</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">的网上邻居中显示的共享文件夹名</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US"> <br />path=/home/x4 //x4</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">为你要共享的文件夹名，在共享前还要建立这个文件夹，并设好权限以便访问，下面会说明。</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US"> <br />valid users=user1 //</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">这个</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">x4</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">共享目录只允许</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">user1</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">这个用户进入</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US"> <br />public=no</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">　　　　</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US"> //no</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">表示除了</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">user1</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">这个用户，其它用户在进入</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">samba</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">服务器后看不见</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">x4</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">这个目录，如果为</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">yes</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">，虽然能看见</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">x4</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">这个目录，但除了</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">user1</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">这个用户能进入这个目录，其它人进不了。</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US"> <br />writable=yes</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">　　</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US"> //</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">允许</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">user1</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">在</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">x4</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">目录中进行读和写操作，反之</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">no </p>
<p>//</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">存盘退出</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US"> <br />#testparm //</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">检查一下语法错误，比如拼错</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US"> </p>
<p></span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">步骤</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">5</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">：建立共享目录</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US"> <br />#mkdir /home/x4 <br />#chown -R user1:user1 /home/x4 //</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">因为是</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">root</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">建立的目录，其它用户只有读的权限，所还得把权限改一下。当然也可以简单的用</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">#chmod 777 /home/x4</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">。还有个问题就是共享里目录的文件如果有些能访问有些不能访问，那肯定也是权限的问题</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">,</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">进入</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">/home/x4,</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">直接</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">#chmod 777 *</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">来解决。</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US"> </p>
<p></span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">步骤</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">6</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">：重启</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">samba</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">服务</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US"> <br />#/etc/init.d/samba restart </p>
<p></span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">设置</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">samba</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">服务要注意以下两点（即两个两次）：</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US"> <br />1.</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">添加两次用户：一次添加系统用户</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">#useradd user1</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">；再一次是添加</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">samba</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">用户</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">#smbpasswd -a user1; <br />2.</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">设置两次权限：一次是在</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">smb.conf</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">中设置共享文件夹的权限：再一次是在系统中设置共享文件夹的权限</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">#chmod 777 </span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">文件夹名。</span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">&nbsp;</span></p>
<p class="MsoNormal" style="text-align: left; line-height: 140%; margin: 0cm 0cm 0pt; mso-pagination: widow-orphan;" align="left"><span style="line-height: 140%; font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS'; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;">按照楼主的做法设置</span><span style="line-height: 140%; font-family: 'Trebuchet MS'; color: black; font-size: 9pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">, </span><span style="line-height: 140%; font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS'; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;">用</span><span style="line-height: 140%; font-family: 'Trebuchet MS'; color: black; font-size: 9pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">WINDOWS</span><span style="line-height: 140%; font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS'; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;">登陆到</span><span style="line-height: 140%; font-family: 'Trebuchet MS'; color: black; font-size: 9pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">samba</span><span style="line-height: 140%; font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS'; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;">的时候报错</span><span style="line-height: 140%; font-family: 'Trebuchet MS'; color: black; font-size: 9pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">, </span><span style="line-height: 140%; font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS'; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;">显示如</span><span style="line-height: 140%; font-family: 'Trebuchet MS'; color: black; font-size: 9pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">//10.x.x.x </span><span style="line-height: 140%; font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS'; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;">无法访问</span><span style="line-height: 140%; font-family: 'Trebuchet MS'; color: black; font-size: 9pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">, </span><span style="line-height: 140%; font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS'; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;">你可能没有权限使用网络资源</span><span style="line-height: 140%; font-family: 'Trebuchet MS'; color: black; font-size: 9pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">.... </span><span style="line-height: 140%; font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS'; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;">这样的错误</span><span style="line-height: 140%; font-family: 'Trebuchet MS'; color: black; font-size: 9pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">. </span><span style="line-height: 140%; font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS'; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;">请问这是怎么回师</span><span style="line-height: 140%; font-family: 'Trebuchet MS'; color: black; font-size: 9pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">? </p>
<p></span><span style="line-height: 140%; font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS'; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;">如果设置</span><span style="line-height: 140%; font-family: 'Trebuchet MS'; color: black; font-size: 9pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">passdb backend = tdbsam </span><span style="line-height: 140%; font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS'; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;">则可以访问</span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">&nbsp;</span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">passdb backend = tdbsam <br /></span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">用</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">tdbsam</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">的时候，密码文件是放在</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US"> /var/lib/samba/passdb.tdb </p>
<p></span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">而没有这句，当然也就找不到</span><span style="font-family: 'Trebuchet MS'; color: black; font-size: 9pt;" lang="EN-US">SMB</span><span style="font-family: 宋体; color: black; font-size: 9pt; mso-ascii-font-family: 'Trebuchet MS'; mso-hansi-font-family: 'Trebuchet MS';">用户和密码，即提示没用权限了。</span></p>
</div>
<p>&nbsp;</p>
<p>第二篇：</p>
<p>#rpm -q samba&nbsp;&nbsp;&nbsp;&nbsp; //查看SAMBA是否安装，如未安装，则执行下列安装</p>
<p>#rpm -ivh&nbsp; samba-3.0.25b-0.4E.6.i386.rpm </p>
<p>#vi /etc/services&nbsp;&nbsp;&nbsp; //查看以netbios开头的是否可用，必须要全部可用</p>
<p>&nbsp;</p>
<div id="clickeye_content">
<div id="fontsize" class="article_c">
<p>&nbsp;</p>
<p>　　//linux防火墙要关闭</p>
<p>#ls /etc/samba //无smbpasswd文件</p>
<p>#smbpasswd -a tom //创建tom用户</p>
<p>#ls /var/log/samba //smb服务器的日志文件</p>
<p>#vi /etc/samba/smb.conf //编辑smb服务器的主配置文件</p>
<p>&nbsp;</p>
<p>　　Workgroup = WORKGROUP //windows工作组名</p>
<p>　　server string = samba server //samba服务器简要说明</p>
<p>　　hosts allow = 192.168.1. 192.168.0. 127. //设置允许访问的子网，默认都允许，可不设置</p>
<p>　　hosts allwo = client1,alarm.com,192.168.16. EXCEPT 192.168.16.4 //举例说明</p>
<p>　　security = user //设置安全级，默认为user。五个级别分别为"share,user,server,domain,ads"</p>
<p>　　interfaces = eth0 //多网卡SAMBA服务器设置监听的网卡</p>
<p>　　interfaces = 192.168.16.177/24 //举例说明</p>
<p>　　wins support = yes //设置将samba服务器作为wins服务器，默认不使用</p>
<p>&nbsp;</p>
<p>　　//wins服务器由微软开发，功能是将NetBIOS名称转换为对应的ip地址</p>
<p>　　username map = /etc/samba/smbusers //去掉前面的;号，用于用户映射</p>
<p>　　然后编辑文件/etc/samba/smbusers，将需要映射的用户添加进去，格式为</p>
<p>　　单独的linux用户 = 要映射的windows用户列表</p>
<p>　　例： test = alarm back //test用户对应windows下的alarm和back两个用户</p>
<p>　　encrypt password = yes 或 no //yes表示采用加密方式发送密码，no为不采用</p>
<p>　　若此项为no,则windows系统必须响应的修改注册表项，注册表文件存放在/usr/share/doc/samba-2.2.7a/docs/Registry下</p>
<p>&nbsp;</p>
<p>　　[homes] //设置共享目录</p>
<p>　　comment = Home Directories //简要说明</p>
<p>　　browseable = no //是否允许用户浏览所有人的主目录</p>
<p>　　writable = yes //是否允许用户写入自己的主目录</p>
<p>&nbsp;</p>
<p>　　[share] //设置一个共享目录</p>
<p>　　comment = Samba's share Directory //简要说明</p>
<p>　　read list = test //只读用户或组</p>
<p>　　write list = @share //可写用户或组</p>
<p>　　path = /home/share //共享文件夹目录路径</p>
<p>&nbsp;</p>
<p>　　//设置共享目录后需要做以下操作</p>
<p>　　1.root登录，使用命令groupadd share 建立share组，并用usermod -g share abc命令将abc用户添加到share组</p>
<p>　　2.mkdir /home/share在/home下建立目录share</p>
<p>　　3.chown :share /home/share设置share目录所属组为share组，chmod 777 /home/share 设置share组对该目录有最大权限</p>
<p>　　:wq //保存退出</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>　　#testparm //测试smb.conf文件是否有语法错误</p>
<p>　　#su - //切换root用户</p>
<p>　　#service smb start　restart　stop //启动　重启　停止samba服务器</p>
<p>　　#ntsysv //设置samba服务器开机启动</p>
</div>
</div>
