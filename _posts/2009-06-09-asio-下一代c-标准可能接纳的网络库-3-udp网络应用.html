---
layout: post
title: ASIO—下一代C++标准可能接纳的网络库（3）UDP网络应用
categories:
- "网络技术"
tags:
- ASIO
- Boost
- C++
status: publish
type: post
published: true
meta:
  ratings_users: '0'
  ratings_score: '0'
  ratings_average: '0'
  views: '16'
author:
  login: jtianling
  email: jtianling@gmail.com
  display_name: jtianling
  first_name: ''
  last_name: ''
---
<br />
<h1 style="margin: 24pt 0cm 0pt 21pt; text-indent: 0cm; mso-list: none;"><span style="color: #365f91;"><span lang="EN-US"><span style="font-family: Cambria;">ASIO&mdash;</span></span><span style="font-family: 宋体; mso-ascii-font-family: Cambria; mso-ascii-theme-font: major-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: major-fareast; mso-hansi-font-family: Cambria; mso-hansi-theme-font: major-latin;">下一代</span><span lang="EN-US"><span style="font-family: Cambria;">C++</span></span><span style="font-family: 宋体; mso-ascii-font-family: Cambria; mso-ascii-theme-font: major-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: major-fareast; mso-hansi-font-family: Cambria; mso-hansi-theme-font: major-latin;">标准可能接纳的网络库（</span><span lang="EN-US"><span style="font-family: Cambria;">3</span></span><span style="font-family: 宋体; mso-ascii-font-family: Cambria; mso-ascii-theme-font: major-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: major-fareast; mso-hansi-font-family: Cambria; mso-hansi-theme-font: major-latin;">）</span><span lang="EN-US"><span style="font-family: Cambria;">UDP</span></span><span style="font-family: 宋体; mso-ascii-font-family: Cambria; mso-ascii-theme-font: major-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: major-fareast; mso-hansi-font-family: Cambria; mso-hansi-theme-font: major-latin;">网络应用</span></span></h1>
<p class="MsoNormal" style="margin: 0cm 0cm 10pt; text-align: right;" align="right"><span lang="EN-US"><a href="http://www.jtianling.com"><span style="font-size: large;"><span style="color: #800080;"><strong><span style="letter-spacing: 0.25pt; font-variant: small-caps;"><span style="font-family: Calibri;">write by </span></span></strong><strong><span style="font-family: 宋体; letter-spacing: 0.25pt; font-variant: small-caps;">九天雁翎</span><span style="letter-spacing: 0.25pt; font-variant: small-caps;"><span style="font-family: Calibri;">(JTianLing) -- www.jtianling.com</span></span></strong></span></span></a></span><strong><span style="text-decoration: underline;"><span style="color: #c0504d; letter-spacing: 0.25pt; font-variant: small-caps; mso-themecolor: accent2; mso-fareast-language: ZH-CN;" lang="EN-US"></span></span></strong></p>
<p class="MsoNormal" style="margin: 0cm 0cm 10pt; text-align: right;" align="right"><span lang="EN-US"><a href="http://groups.google.com/group/jiutianfile/"><strong><span style="font-family: 宋体; letter-spacing: 0.25pt; font-variant: small-caps; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN;" lang="EN-US"><span lang="EN-US"><span style="font-size: large; color: #800080;">讨论新闻组及文件</span></span></span></strong></a></span><span style="mso-fareast-language: ZH-CN;" lang="EN-US"></span></p>
<h1 style="margin: 24pt 0cm 0pt 21pt;"><span style="color: #365f91;"><span style="mso-bidi-font-family: 宋体; mso-bidi-theme-font: major-fareast;" lang="EN-US"><span style="mso-list: Ignore;"><span style="font-family: Cambria;">一、</span><span style='font: 7pt "Times New Roman";'>&nbsp;&nbsp; </span></span></span><span style="font-family: 宋体; mso-ascii-font-family: Cambria; mso-ascii-theme-font: major-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: major-fareast; mso-hansi-font-family: Cambria; mso-hansi-theme-font: major-latin;">综述</span></span></h1>
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><span style="font-size: large;"><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;">接着前面</span><span style="mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;" lang="EN-US"></span></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><span style="font-size: large;"><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;">《</span><span class="title"><span lang="EN-US"><a href="http://www.jtianling.com/archive/2009/06/07/4248655.aspx" target="_blank"><span style="mso-fareast-language: ZH-CN;"><span style="font-family: Calibri;">ASIO&mdash;</span></span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN;" lang="EN-US"><span lang="EN-US">下一代</span></span><span style="mso-fareast-language: ZH-CN;"><span style="font-family: Calibri;">C++</span></span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN;" lang="EN-US"><span lang="EN-US">标准可能接纳的网络库（</span></span><span style="mso-fareast-language: ZH-CN;"><span style="font-family: Calibri;">1</span></span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN;" lang="EN-US"><span lang="EN-US">）简单的应用</span></span></a></span></span><span class="title"><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN;">》</span></span><span class="title"><span style="mso-fareast-language: ZH-CN;" lang="EN-US"></span></span></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><span style="font-size: large;"><span class="title"><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN;">《</span><span lang="EN-US"><a href="http://www.jtianling.com/archive/2009/06/07/4249975.aspx" target="_blank"><span style="color: #800080;"><span style="mso-fareast-language: ZH-CN;"><span style="font-family: Calibri;">ASIO&mdash;</span></span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN;" lang="EN-US"><span lang="EN-US">下一代</span></span><span style="mso-fareast-language: ZH-CN;"><span style="font-family: Calibri;">C++</span></span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN;" lang="EN-US"><span lang="EN-US">标准可能接纳的网络库（</span></span><span style="mso-fareast-language: ZH-CN;"><span style="font-family: Calibri;">2</span></span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN;" lang="EN-US"><span lang="EN-US">）</span></span><span style="mso-fareast-language: ZH-CN;"><span style="font-family: Calibri;">TCP</span></span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN;" lang="EN-US"><span lang="EN-US">网络应用</span></span></span></a></span></span><span class="title"><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN;">》</span></span><span class="title"><span style="mso-fareast-language: ZH-CN;" lang="EN-US"></span></span></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><span style="font-size: large;"><span class="title"><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN;">继续，讲了简单应用，讲了</span></span><span class="title"><span style="mso-fareast-language: ZH-CN;" lang="EN-US"><span style="font-family: Calibri;">TCP,</span></span></span><span class="title"><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN;">自然而然是</span></span><span class="title"><span style="mso-fareast-language: ZH-CN;" lang="EN-US"><span style="font-family: Calibri;">UDP</span></span></span><span class="title"><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN;">了。其实个人感觉</span></span><span class="title"><span style="mso-fareast-language: ZH-CN;" lang="EN-US"><span style="font-family: Calibri;">UDP</span></span></span><span class="title"><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN;">与</span></span><span class="title"><span style="mso-fareast-language: ZH-CN;" lang="EN-US"><span style="font-family: Calibri;">TCP</span></span></span><span class="title"><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN;">的接口假如经过封装是可以做到接口比较一致的，但是遗憾的是</span></span><span class="title"><span style="mso-fareast-language: ZH-CN;" lang="EN-US"><span style="font-family: Calibri;">asio</span></span></span><span class="title"><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN;">没有遵循这样的接口设计方案。</span></span><span style="mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;" lang="EN-US"></span></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><span style="font-size: large;"><span style="font-family: Calibri;"><span style="mso-fareast-language: ZH-CN;" lang="EN-US"><span style="mso-tab-count: 1;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;" lang="EN-US"></span></span></span></p>
<h1 style="margin: 24pt 0cm 0pt 21pt;"><span style="color: #365f91;"><span style="mso-bidi-font-family: 宋体; mso-bidi-theme-font: major-fareast;" lang="EN-US"><span style="mso-list: Ignore;"><span style="font-family: Cambria;">二、</span><span style='font: 7pt "Times New Roman";'>&nbsp;&nbsp; </span></span></span><span lang="EN-US"><span style="font-family: Cambria;">Tutorial</span></span></span></h1>
<h2 style="margin: 13pt 0cm 13pt 21pt;"><span style="mso-fareast-font-family: Cambria; mso-fareast-theme-font: major-latin; mso-fareast-language: ZH-CN; mso-bidi-font-family: Cambria; mso-bidi-theme-font: major-latin; mso-bidi-language: AR-SA;" lang="EN-US"><span style="mso-list: Ignore;"><span style="font-size: large; font-family: Cambria;">1.</span><span style='font: 7pt "Times New Roman";'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="font-size: large;"><span style="mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;" lang="EN-US"><span style="font-family: Cambria;">Daytime.4 - A synchronous UDP daytime client</span></span><span style="font-family: 宋体; mso-ascii-font-family: Cambria; mso-ascii-theme-font: major-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: major-fareast; mso-hansi-font-family: Cambria; mso-hansi-theme-font: major-latin; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;">（同步</span><span style="mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;" lang="EN-US"><span style="font-family: Cambria;">UDP daytime</span></span><span style="font-family: 宋体; mso-ascii-font-family: Cambria; mso-ascii-theme-font: major-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: major-fareast; mso-hansi-font-family: Cambria; mso-hansi-theme-font: major-latin; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;">客户端）</span><span style="mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;" lang="EN-US"></span></span></h2>
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><span style="font-size: large;"><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN;">还是先看看普通的</span><span style="mso-fareast-language: ZH-CN;" lang="EN-US"><span style="font-family: Calibri;">socket API</span></span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN;">的情况：</span><span style="mso-fareast-language: ZH-CN;" lang="EN-US"></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small; color: #0000ff; font-family: 新宋体;">#include &lt;stdio.h&gt;</span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small; color: #0000ff; font-family: 新宋体;">#include &lt;string.h&gt;</span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small; color: #0000ff; font-family: 新宋体;">#include "Winsock2.h"</span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small; color: #0000ff; font-family: 新宋体;">#include "errno.h"</span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small; color: #0000ff; font-family: 新宋体;">#include "stdlib.h"</span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small; color: #0000ff; font-family: 新宋体;">&nbsp;</span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="color: #0000ff;">#define </span></span><span style="color: #010001;" lang="EN-US">MAXLINE</span><span lang="EN-US"><span style="color: #0000ff;"> 1000</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="color: #0000ff;">void </span></span><span style="color: #010001;" lang="EN-US">str_cli</span><span lang="EN-US"><span style="color: #0000ff;">(</span></span><span style="color: #010001;" lang="EN-US">SOCKET</span><span lang="EN-US"><span style="color: #0000ff;"> </span></span><span style="color: #010001;" lang="EN-US">sockfd</span><span lang="EN-US"><span style="color: #0000ff;">, const struct </span></span><span style="color: #010001;" lang="EN-US">sockaddr</span><span lang="EN-US"><span style="color: #0000ff;">* </span></span><span style="color: #010001;" lang="EN-US">pservaddr</span><span lang="EN-US"><span style="color: #0000ff;">, int </span></span><span style="color: #010001;" lang="EN-US">servlen</span><span lang="EN-US"><span style="color: #0000ff;">)</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small; color: #0000ff; font-family: 新宋体;">{</span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="color: #0000ff;"><span style="mso-tab-count: 1;">&nbsp;&nbsp;&nbsp; </span>int </span></span><span style="color: #010001;" lang="EN-US">n</span><span lang="EN-US"><span style="color: #0000ff;">;</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="color: #0000ff;"><span style="mso-tab-count: 1;">&nbsp;&nbsp;&nbsp; </span>char </span></span><span style="color: #010001;" lang="EN-US">recvline</span><span lang="EN-US"><span style="color: #0000ff;">[</span></span><span style="color: #010001;" lang="EN-US">MAXLINE</span><span lang="EN-US"><span style="color: #0000ff;">] = {0};</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="color: #0000ff;"><span style="mso-tab-count: 1;">&nbsp;&nbsp;&nbsp; </span>char </span></span><span style="color: #010001;" lang="EN-US">sendline</span><span lang="EN-US"><span style="color: #0000ff;">[2] = {0};</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 1;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">sendto</span><span lang="EN-US"><span style="color: #0000ff;">(</span></span><span style="color: #010001;" lang="EN-US">sockfd</span><span lang="EN-US"><span style="color: #0000ff;">, </span></span><span style="color: #010001;" lang="EN-US">sendline</span><span lang="EN-US"><span style="color: #0000ff;">, 2, 0, </span></span><span style="color: #010001;" lang="EN-US">pservaddr</span><span lang="EN-US"><span style="color: #0000ff;">, </span></span><span style="color: #010001;" lang="EN-US">servlen</span><span lang="EN-US"><span style="color: #0000ff;">);</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small; color: #0000ff; font-family: 新宋体;">&nbsp;</span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 1;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">n</span><span lang="EN-US"><span style="color: #0000ff;"> = </span></span><span style="color: #010001;" lang="EN-US">recvfrom</span><span lang="EN-US"><span style="color: #0000ff;">(</span></span><span style="color: #010001;" lang="EN-US">sockfd</span><span lang="EN-US"><span style="color: #0000ff;">, </span></span><span style="color: #010001;" lang="EN-US">recvline</span><span lang="EN-US"><span style="color: #0000ff;">, </span></span><span style="color: #010001;" lang="EN-US">MAXLINE</span><span lang="EN-US"><span style="color: #0000ff;">, 0, </span></span><span style="color: #010001;" lang="EN-US">NULL</span><span lang="EN-US"><span style="color: #0000ff;">, </span></span><span style="color: #010001;" lang="EN-US">NULL</span><span lang="EN-US"><span style="color: #0000ff;">);</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 1;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">recvline</span><span lang="EN-US"><span style="color: #0000ff;">[</span></span><span style="color: #010001;" lang="EN-US">n</span><span lang="EN-US"><span style="color: #0000ff;">] = 0;</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 1;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">printf</span><span lang="EN-US"><span style="color: #0000ff;">("%s", </span></span><span style="color: #010001;" lang="EN-US">recvline</span><span lang="EN-US"><span style="color: #0000ff;">);</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small; color: #0000ff; font-family: 新宋体;">}</span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small; color: #0000ff; font-family: 新宋体;">&nbsp;</span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small; color: #0000ff; font-family: 新宋体;">&nbsp;</span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="color: #0000ff;">int </span></span><span style="color: #010001;" lang="EN-US">main</span><span lang="EN-US"><span style="color: #0000ff;">(int </span></span><span style="color: #010001;" lang="EN-US">argc</span><span lang="EN-US"><span style="color: #0000ff;">, char **</span></span><span style="color: #010001;" lang="EN-US">argv</span><span lang="EN-US"><span style="color: #0000ff;">)</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small; color: #0000ff; font-family: 新宋体;">{</span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 1;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">WORD</span><span lang="EN-US"><span style="color: #0000ff;"> </span></span><span style="color: #010001;" lang="EN-US">wVersionRequested</span><span lang="EN-US"><span style="color: #0000ff;"> = 0;</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 1;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">WSADATA</span><span lang="EN-US"><span style="color: #0000ff;"> </span></span><span style="color: #010001;" lang="EN-US">wsaData</span><span lang="EN-US"><span style="color: #0000ff;">;</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="color: #0000ff;"><span style="mso-tab-count: 1;">&nbsp;&nbsp;&nbsp; </span>int </span></span><span style="color: #010001;" lang="EN-US">err</span><span lang="EN-US"><span style="color: #0000ff;">;</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small; color: #0000ff; font-family: 新宋体;">&nbsp;</span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 1;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">wVersionRequested</span><span lang="EN-US"><span style="color: #0000ff;"> = </span></span><span style="color: #010001;" lang="EN-US">MAKEWORD</span><span lang="EN-US"><span style="color: #0000ff;">( 2, 2 );</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small; color: #0000ff; font-family: 新宋体;">&nbsp;</span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 1;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: green;" lang="EN-US">// windows</span><span style="color: green;">下此初始化为必须，实际是初始化<span lang="EN-US">WinsockDLL</span>的过程<span lang="EN-US"></span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 1;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">err</span><span lang="EN-US"><span style="color: #0000ff;"> = </span></span><span style="color: #010001;" lang="EN-US">WSAStartup</span><span lang="EN-US"><span style="color: #0000ff;">( </span></span><span style="color: #010001;" lang="EN-US">wVersionRequested</span><span lang="EN-US"><span style="color: #0000ff;">, &amp;</span></span><span style="color: #010001;" lang="EN-US">wsaData</span><span lang="EN-US"><span style="color: #0000ff;"> );</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="color: #0000ff;"><span style="mso-tab-count: 1;">&nbsp;&nbsp;&nbsp; </span>if ( </span></span><span style="color: #010001;" lang="EN-US">err</span><span lang="EN-US"><span style="color: #0000ff;"> != 0 ) {</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small;"><span style="color: #0000ff;"><span style="font-family: 新宋体;"><span style="mso-tab-count: 2;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>return -1;</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small;"><span style="color: #0000ff;"><span style="font-family: 新宋体;"><span style="mso-tab-count: 1;">&nbsp;&nbsp;&nbsp; </span>}</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 1;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">SOCKET</span><span lang="EN-US"><span style="mso-tab-count: 5;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">sockfd</span><span lang="EN-US"><span style="color: #0000ff;">;</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="color: #0000ff;"><span style="mso-tab-count: 1;">&nbsp;&nbsp;&nbsp; </span>struct </span></span><span style="color: #010001;" lang="EN-US">sockaddr_in</span><span lang="EN-US"><span style="mso-tab-count: 1;"><span style="color: #0000ff;">&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">servaddr</span><span lang="EN-US"><span style="color: #0000ff;">;</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small; color: #0000ff; font-family: 新宋体;">&nbsp;</span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="color: #0000ff;"><span style="mso-tab-count: 1;">&nbsp;&nbsp;&nbsp; </span>if (</span></span><span style="color: #010001;" lang="EN-US">argc</span><span lang="EN-US"><span style="color: #0000ff;"> != 2)</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small;"><span style="color: #0000ff;"><span style="font-family: 新宋体;"><span style="mso-tab-count: 1;">&nbsp;&nbsp;&nbsp; </span>{</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 2;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">printf</span><span lang="EN-US"><span style="color: #0000ff;">("usage: tcpcli &lt;IPaddress&gt;");</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 2;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">exit</span><span lang="EN-US"><span style="color: #0000ff;">(1);</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small;"><span style="color: #0000ff;"><span style="font-family: 新宋体;"><span style="mso-tab-count: 1;">&nbsp;&nbsp;&nbsp; </span>}</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small; color: #0000ff; font-family: 新宋体;">&nbsp;</span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 1;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">sockfd</span><span lang="EN-US"><span style="color: #0000ff;"> = </span></span><span style="color: #010001;" lang="EN-US">socket</span><span lang="EN-US"><span style="color: #0000ff;">(</span></span><span style="color: #010001;" lang="EN-US">AF_INET</span><span lang="EN-US"><span style="color: #0000ff;">, </span></span><span style="color: #010001;" lang="EN-US">SOCK_DGRAM</span><span lang="EN-US"><span style="color: #0000ff;">, 0);</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small; color: #0000ff; font-family: 新宋体;">&nbsp;</span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 1;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">ZeroMemory</span><span lang="EN-US"><span style="color: #0000ff;">(&amp;</span></span><span style="color: #010001;" lang="EN-US">servaddr</span><span lang="EN-US"><span style="color: #0000ff;">, sizeof(</span></span><span style="color: #010001;" lang="EN-US">servaddr</span><span lang="EN-US"><span style="color: #0000ff;">));</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 1;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">servaddr</span><span lang="EN-US"><span style="color: #0000ff;">.</span></span><span style="color: #010001;" lang="EN-US">sin_family</span><span lang="EN-US"><span style="color: #0000ff;"> = </span></span><span style="color: #010001;" lang="EN-US">AF_INET</span><span lang="EN-US"><span style="color: #0000ff;">;</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 1;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">servaddr</span><span lang="EN-US"><span style="color: #0000ff;">.</span></span><span style="color: #010001;" lang="EN-US">sin_port</span><span lang="EN-US"><span style="color: #0000ff;"> = </span></span><span style="color: #010001;" lang="EN-US">htons</span><span lang="EN-US"><span style="color: #0000ff;">(13);</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 1;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">servaddr</span><span lang="EN-US"><span style="color: #0000ff;">.</span></span><span style="color: #010001;" lang="EN-US">sin_addr</span><span lang="EN-US"><span style="color: #0000ff;">.</span></span><span style="color: #010001;" lang="EN-US">s_addr</span><span lang="EN-US"><span style="color: #0000ff;"> = </span></span><span style="color: #010001;" lang="EN-US">inet_addr</span><span lang="EN-US"><span style="color: #0000ff;">(</span></span><span style="color: #010001;" lang="EN-US">argv</span><span lang="EN-US"><span style="color: #0000ff;">[1]);</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small; color: #0000ff; font-family: 新宋体;">&nbsp;</span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 1;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">str_cli</span><span lang="EN-US"><span style="color: #0000ff;">(</span></span><span style="color: #010001;" lang="EN-US">sockfd</span><span lang="EN-US"><span style="color: #0000ff;">, (const struct </span></span><span style="color: #010001;" lang="EN-US">sockaddr</span><span lang="EN-US"><span style="color: #0000ff;">*)&amp;</span></span><span style="color: #010001;" lang="EN-US">servaddr</span><span lang="EN-US"><span style="color: #0000ff;">, sizeof(</span></span><span style="color: #010001;" lang="EN-US">servaddr</span><span lang="EN-US"><span style="color: #0000ff;">));</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small; color: #0000ff; font-family: 新宋体;">&nbsp;</span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 1;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">system</span><span lang="EN-US"><span style="color: #0000ff;">("pause");</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 1;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">WSACleanup</span><span lang="EN-US"><span style="color: #0000ff;">();</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 1;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">exit</span><span lang="EN-US"><span style="color: #0000ff;">(0);</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small; color: #0000ff; font-family: 新宋体;">}</span></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><span style="mso-fareast-language: ZH-CN;" lang="EN-US"><span style="font-size: large; font-family: Calibri;">&nbsp;</span></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><span style="font-size: large;"><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN;">相对来说，假如用了</span><span style="mso-fareast-language: ZH-CN;" lang="EN-US"><span style="font-family: Calibri;">socket API</span></span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN;">，会发现</span><span style="mso-fareast-language: ZH-CN;" lang="EN-US"><span style="font-family: Calibri;">UDP</span></span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN;">的程序编写逻辑是比</span><span style="mso-fareast-language: ZH-CN;" lang="EN-US"><span style="font-family: Calibri;">TCP</span></span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN;">要简单的，起码省略了</span><span style="mso-fareast-language: ZH-CN;" lang="EN-US"><span style="font-family: Calibri;">connect</span></span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN;">的过程，但是难就难在当网络情况不好时</span><span style="mso-fareast-language: ZH-CN;" lang="EN-US"><span style="font-family: Calibri;">UDP</span></span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN;">程序的处理。这么简单的程序不再加更多说明了。</span><span style="mso-fareast-language: ZH-CN;" lang="EN-US"></span></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><span style="font-size: large;"><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN;">看看</span><span style="mso-fareast-language: ZH-CN;" lang="EN-US"><span style="font-family: Calibri;">asio</span></span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN;">的例子</span><span style="mso-fareast-language: ZH-CN;" lang="EN-US"><span style="font-family: Calibri;">:</span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small; color: #0000ff; font-family: 新宋体;">#include &lt;iostream&gt;</span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small; color: #0000ff; font-family: 新宋体;">#include &lt;boost/array.hpp&gt;</span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small; color: #0000ff; font-family: 新宋体;">#include &lt;boost/asio.hpp&gt;</span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="color: #0000ff;">using </span></span><span style="color: #010001;" lang="EN-US">boost</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">asio</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">ip</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">udp</span><span lang="EN-US"><span style="color: #0000ff;">;</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="color: #0000ff;">int </span></span><span style="color: #010001;" lang="EN-US">main</span><span lang="EN-US"><span style="color: #0000ff;">(int </span></span><span style="color: #010001;" lang="EN-US">argc</span><span lang="EN-US"><span style="color: #0000ff;">, char* </span></span><span style="color: #010001;" lang="EN-US">argv</span><span lang="EN-US"><span style="color: #0000ff;">[])</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small; color: #0000ff; font-family: 新宋体;">{</span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small;"><span style="color: #0000ff;"><span style="font-family: 新宋体;"><span style="mso-tab-count: 1;">&nbsp;&nbsp;&nbsp; </span>try</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small;"><span style="color: #0000ff;"><span style="font-family: 新宋体;"><span style="mso-tab-count: 1;">&nbsp;&nbsp;&nbsp; </span>{</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="color: #0000ff;"><span style="mso-tab-count: 2;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>if (</span></span><span style="color: #010001;" lang="EN-US">argc</span><span lang="EN-US"><span style="color: #0000ff;"> != 2)</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small;"><span style="color: #0000ff;"><span style="font-family: 新宋体;"><span style="mso-tab-count: 2;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>{</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 3;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">std</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">cerr</span><span lang="EN-US"><span style="color: #0000ff;"> &lt;&lt; "Usage: client &lt;host&gt;" &lt;&lt; </span></span><span style="color: #010001;" lang="EN-US">std</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">endl</span><span lang="EN-US"><span style="color: #0000ff;">;</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small;"><span style="color: #0000ff;"><span style="font-family: 新宋体;"><span style="mso-tab-count: 3;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>return 1;</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small;"><span style="color: #0000ff;"><span style="font-family: 新宋体;"><span style="mso-tab-count: 2;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 2;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">boost</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">asio</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">io_service</span><span lang="EN-US"><span style="color: #0000ff;"> </span></span><span style="color: #010001;" lang="EN-US">io_service</span><span lang="EN-US"><span style="color: #0000ff;">;</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 2;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">udp</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">resolver</span><span lang="EN-US"><span style="color: #0000ff;"> </span></span><span style="color: #010001;" lang="EN-US">resolver</span><span lang="EN-US"><span style="color: #0000ff;">(</span></span><span style="color: #010001;" lang="EN-US">io_service</span><span lang="EN-US"><span style="color: #0000ff;">);</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 2;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">udp</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">resolver</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">query</span><span lang="EN-US"><span style="color: #0000ff;"> </span></span><span style="color: #010001;" lang="EN-US">query</span><span lang="EN-US"><span style="color: #0000ff;">(</span></span><span style="color: #010001;" lang="EN-US">udp</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">v4</span><span lang="EN-US"><span style="color: #0000ff;">(), </span></span><span style="color: #010001;" lang="EN-US">argv</span><span lang="EN-US"><span style="color: #0000ff;">[1], "daytime");</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 2;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">udp</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">endpoint</span><span lang="EN-US"><span style="color: #0000ff;"> </span></span><span style="color: #010001;" lang="EN-US">receiver_endpoint</span><span lang="EN-US"><span style="color: #0000ff;"> = *</span></span><span style="color: #010001;" lang="EN-US">resolver</span><span lang="EN-US"><span style="color: #0000ff;">.</span></span><span style="color: #010001;" lang="EN-US">resolve</span><span lang="EN-US"><span style="color: #0000ff;">(</span></span><span style="color: #010001;" lang="EN-US">query</span><span lang="EN-US"><span style="color: #0000ff;">);</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 2;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">udp</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">socket</span><span lang="EN-US"><span style="color: #0000ff;"> </span></span><span style="color: #010001;" lang="EN-US">socket</span><span lang="EN-US"><span style="color: #0000ff;">(</span></span><span style="color: #010001;" lang="EN-US">io_service</span><span lang="EN-US"><span style="color: #0000ff;">);</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 2;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">socket</span><span lang="EN-US"><span style="color: #0000ff;">.</span></span><span style="color: #010001;" lang="EN-US">open</span><span lang="EN-US"><span style="color: #0000ff;">(</span></span><span style="color: #010001;" lang="EN-US">udp</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">v4</span><span lang="EN-US"><span style="color: #0000ff;">());</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 2;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">boost</span><span lang="EN-US"><span style="color: #0000ff;">::array&lt;char, 1&gt; </span></span><span style="color: #010001;" lang="EN-US">send_buf</span><span lang="EN-US"><span style="color: #0000ff;"> = { 0 };</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 2;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">socket</span><span lang="EN-US"><span style="color: #0000ff;">.</span></span><span style="color: #010001;" lang="EN-US">send_to</span><span lang="EN-US"><span style="color: #0000ff;">(</span></span><span style="color: #010001;" lang="EN-US">boost</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">asio</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">buffer</span><span lang="EN-US"><span style="color: #0000ff;">(</span></span><span style="color: #010001;" lang="EN-US">send_buf</span><span lang="EN-US"><span style="color: #0000ff;">), </span></span><span style="color: #010001;" lang="EN-US">receiver_endpoint</span><span lang="EN-US"><span style="color: #0000ff;">);</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 2;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">boost</span><span lang="EN-US"><span style="color: #0000ff;">::array&lt;char, 128&gt; </span></span><span style="color: #010001;" lang="EN-US">recv_buf</span><span lang="EN-US"><span style="color: #0000ff;">;</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 2;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">udp</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">endpoint</span><span lang="EN-US"><span style="color: #0000ff;"> </span></span><span style="color: #010001;" lang="EN-US">sender_endpoint</span><span lang="EN-US"><span style="color: #0000ff;">;</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 2;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">size_t</span><span lang="EN-US"><span style="color: #0000ff;"> </span></span><span style="color: #010001;" lang="EN-US">len</span><span lang="EN-US"><span style="color: #0000ff;"> = </span></span><span style="color: #010001;" lang="EN-US">socket</span><span lang="EN-US"><span style="color: #0000ff;">.</span></span><span style="color: #010001;" lang="EN-US">receive_from</span><span lang="EN-US"><span style="color: #0000ff;">(</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 3;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">boost</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">asio</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">buffer</span><span lang="EN-US"><span style="color: #0000ff;">(</span></span><span style="color: #010001;" lang="EN-US">recv_buf</span><span lang="EN-US"><span style="color: #0000ff;">), </span></span><span style="color: #010001;" lang="EN-US">sender_endpoint</span><span lang="EN-US"><span style="color: #0000ff;">);</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 2;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">std</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">cout</span><span lang="EN-US"><span style="color: #0000ff;">.</span></span><span style="color: #010001;" lang="EN-US">write</span><span lang="EN-US"><span style="color: #0000ff;">(</span></span><span style="color: #010001;" lang="EN-US">recv_buf</span><span lang="EN-US"><span style="color: #0000ff;">.</span></span><span style="color: #010001;" lang="EN-US">data</span><span lang="EN-US"><span style="color: #0000ff;">(), </span></span><span style="color: #010001;" lang="EN-US">len</span><span lang="EN-US"><span style="color: #0000ff;">);</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small;"><span style="color: #0000ff;"><span style="font-family: 新宋体;"><span style="mso-tab-count: 1;">&nbsp;&nbsp;&nbsp; </span>}</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="color: #0000ff;"><span style="mso-tab-count: 1;">&nbsp;&nbsp;&nbsp; </span>catch (</span></span><span style="color: #010001;" lang="EN-US">std</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">exception</span><span lang="EN-US"><span style="color: #0000ff;">&amp; </span></span><span style="color: #010001;" lang="EN-US">e</span><span lang="EN-US"><span style="color: #0000ff;">)</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small;"><span style="color: #0000ff;"><span style="font-family: 新宋体;"><span style="mso-tab-count: 1;">&nbsp;&nbsp;&nbsp; </span>{</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 2;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">std</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">cerr</span><span lang="EN-US"><span style="color: #0000ff;"> &lt;&lt; </span></span><span style="color: #010001;" lang="EN-US">e</span><span lang="EN-US"><span style="color: #0000ff;">.</span></span><span style="color: #010001;" lang="EN-US">what</span><span lang="EN-US"><span style="color: #0000ff;">() &lt;&lt; </span></span><span style="color: #010001;" lang="EN-US">std</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">endl</span><span lang="EN-US"><span style="color: #0000ff;">;</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small;"><span style="color: #0000ff;"><span style="font-family: 新宋体;"><span style="mso-tab-count: 1;">&nbsp;&nbsp;&nbsp; </span>}</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small;"><span style="color: #0000ff;"><span style="font-family: 新宋体;"><span style="mso-tab-count: 1;">&nbsp;&nbsp;&nbsp; </span>return 0;</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small; color: #0000ff; font-family: 新宋体;">}</span></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><span style="mso-fareast-language: ZH-CN;" lang="EN-US"><span style="font-size: large; font-family: Calibri;">&nbsp;</span></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><span style="font-size: large;"><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN;">甚至没有感觉到有任何简化。一大堆的</span><span style="mso-fareast-language: ZH-CN;" lang="EN-US"><span style="font-family: Calibri;">resolver(</span></span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN;">为了适应</span><span style="mso-fareast-language: ZH-CN;" lang="EN-US"><span style="font-family: Calibri;">ipv6)</span></span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN;">，一大堆的</span><span style="mso-fareast-language: ZH-CN;" lang="EN-US"><span style="font-family: Calibri;">array,</span></span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN;">其实并不优雅，在很简单的程序中，会发现，似乎</span><span style="mso-fareast-language: ZH-CN;" lang="EN-US"><span style="font-family: Calibri;">asio</span></span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN;">就</span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;" lang="EN-US">是简单的为</span><span lang="EN-US"><span style="font-family: Calibri;">socket</span></span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;" lang="EN-US">进行了非常浅的封装一样，你还得了解一大堆本来可以不了解的东西，</span><span lang="EN-US"><span style="font-family: Calibri;">asio</span></span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;" lang="EN-US">内在的高效率，异步啊，用的那些模式啊，都看不到。。。。。。。。。。呵呵，</span><span lang="EN-US"><span style="font-family: Calibri;"> </span></span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;" lang="EN-US">也许</span><span style="mso-fareast-language: ZH-CN;" lang="EN-US"><span style="font-family: Calibri;">socket API</span></span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;" lang="EN-US">本来就是</span><span lang="EN-US"><span style="font-family: Calibri;">Make the simple things simple</span></span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN;">吧，而</span><span style="mso-fareast-language: ZH-CN;" lang="EN-US"><span style="font-family: Calibri;">asio</span></span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN;">就是为了应付绝对复杂的情况而做出相对复杂设计的吧。这样的例子没有任何说服力能让人放弃</span><span style="mso-fareast-language: ZH-CN;" lang="EN-US"><span style="font-family: Calibri;">socket API</span></span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN;">而使用</span><span style="mso-fareast-language: ZH-CN;" lang="EN-US"><span style="font-family: Calibri;">asio</span></span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN;">。。。。。。。不知道</span><span style="mso-fareast-language: ZH-CN;" lang="EN-US"><span style="font-family: Calibri;">asio</span></span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN;">的文档中加入这些干啥。。。仅仅为了说明？</span><span style="mso-fareast-language: ZH-CN;" lang="EN-US"><span style="font-family: Calibri;">-_-!</span></span></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><span style="mso-fareast-language: ZH-CN;" lang="EN-US"><span style="font-size: large; font-family: Calibri;">&nbsp;</span></span></p>
<h2 style="margin: 13pt 0cm 13pt 21pt;"><span style="mso-fareast-font-family: Cambria; mso-fareast-theme-font: major-latin; mso-fareast-language: ZH-CN; mso-bidi-font-family: Cambria; mso-bidi-theme-font: major-latin; mso-bidi-language: AR-SA;" lang="EN-US"><span style="mso-list: Ignore;"><span style="font-size: large; font-family: Cambria;">2.</span><span style='font: 7pt "Times New Roman";'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="font-size: large;"><span style="mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;" lang="EN-US"><span style="font-family: Cambria;">A synchronous UDP daytime server</span></span><span style="font-family: 宋体; mso-ascii-font-family: Cambria; mso-ascii-theme-font: major-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: major-fareast; mso-hansi-font-family: Cambria; mso-hansi-theme-font: major-latin; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;">（同步的</span><span style="mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;" lang="EN-US"><span style="font-family: Cambria;">UDP daytime</span></span><span style="font-family: 宋体; mso-ascii-font-family: Cambria; mso-ascii-theme-font: major-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: major-fareast; mso-hansi-font-family: Cambria; mso-hansi-theme-font: major-latin; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;">服务器）</span><span style="mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;" lang="EN-US"></span></span></h2>
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><span style="font-size: large;"><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;">还是先来个原始的</span><span style="mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;" lang="EN-US"><span style="font-family: Calibri;">socket API</span></span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;">写的版本：</span><span style="mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;" lang="EN-US"></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="color: #0000ff;">#include </span></span><span style="color: #a31515;" lang="EN-US">&lt;time.h&gt;</span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="color: #0000ff;">#include </span></span><span style="color: #a31515;" lang="EN-US">"Winsock2.h"</span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="color: #0000ff;">#include </span></span><span style="color: #a31515;" lang="EN-US">"errno.h"</span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="color: #0000ff;">#include </span></span><span style="color: #a31515;" lang="EN-US">"stdlib.h"</span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="color: #a31515;" lang="EN-US"><span style="font-size: small; font-family: 新宋体;">&nbsp;</span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="color: #0000ff;">#define </span></span><span style="color: #010001;" lang="EN-US">MAXLINE</span><span lang="EN-US"><span style="color: #0000ff;"> 1000</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="color: #0000ff;">void </span></span><span style="color: #010001;" lang="EN-US">str_svr</span><span lang="EN-US"><span style="color: #0000ff;">(</span></span><span style="color: #010001;" lang="EN-US">SOCKET</span><span lang="EN-US"><span style="color: #0000ff;"> </span></span><span style="color: #010001;" lang="EN-US">sockfd</span><span lang="EN-US"><span style="color: #0000ff;">, struct </span></span><span style="color: #010001;" lang="EN-US">sockaddr</span><span lang="EN-US"><span style="color: #0000ff;">* </span></span><span style="color: #010001;" lang="EN-US">pcliaddr</span><span lang="EN-US"><span style="color: #0000ff;">, int </span></span><span style="color: #010001;" lang="EN-US">clilen</span><span lang="EN-US"><span style="color: #0000ff;">)</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small; color: #0000ff; font-family: 新宋体;">{</span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="color: #0000ff;"><span style="mso-tab-count: 1;">&nbsp;&nbsp;&nbsp; </span>int </span></span><span style="color: #010001;" lang="EN-US">n</span><span lang="EN-US"><span style="color: #0000ff;"> = 0;</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 1;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">time_t</span><span lang="EN-US"><span style="color: #0000ff;"> </span></span><span style="color: #010001;" lang="EN-US">ticks</span><span lang="EN-US"><span style="color: #0000ff;"> = 0;</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="color: #0000ff;"><span style="mso-tab-count: 1;">&nbsp;&nbsp;&nbsp; </span>int </span></span><span style="color: #010001;" lang="EN-US">len</span><span lang="EN-US"><span style="color: #0000ff;">;</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="color: #0000ff;"><span style="mso-tab-count: 1;">&nbsp;&nbsp;&nbsp; </span>char </span></span><span style="color: #010001;" lang="EN-US">recvline</span><span lang="EN-US"><span style="color: #0000ff;">[2] = {0};</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="color: #0000ff;"><span style="mso-tab-count: 1;">&nbsp;&nbsp;&nbsp; </span>char </span></span><span style="color: #010001;" lang="EN-US">sendline</span><span lang="EN-US"><span style="color: #0000ff;">[</span></span><span style="color: #010001;" lang="EN-US">MAXLINE</span><span lang="EN-US"><span style="color: #0000ff;">] = {0};</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small;"><span style="color: #0000ff;"><span style="font-family: 新宋体;"><span style="mso-tab-count: 1;">&nbsp;&nbsp;&nbsp; </span>for(;;)</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small;"><span style="color: #0000ff;"><span style="font-family: 新宋体;"><span style="mso-tab-count: 1;">&nbsp;&nbsp;&nbsp; </span>{</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 2;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">len</span><span lang="EN-US"><span style="color: #0000ff;"> = </span></span><span style="color: #010001;" lang="EN-US">clilen</span><span lang="EN-US"><span style="color: #0000ff;">;</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="color: #0000ff;"><span style="mso-tab-count: 2;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>if( (</span></span><span style="color: #010001;" lang="EN-US">n</span><span lang="EN-US"><span style="color: #0000ff;"> = </span></span><span style="color: #010001;" lang="EN-US">recvfrom</span><span lang="EN-US"><span style="color: #0000ff;">(</span></span><span style="color: #010001;" lang="EN-US">sockfd</span><span lang="EN-US"><span style="color: #0000ff;">, </span></span><span style="color: #010001;" lang="EN-US">recvline</span><span lang="EN-US"><span style="color: #0000ff;">, 2, 0, </span></span><span style="color: #010001;" lang="EN-US">pcliaddr</span><span lang="EN-US"><span style="color: #0000ff;">, &amp;</span></span><span style="color: #010001;" lang="EN-US">len</span><span lang="EN-US"><span style="color: #0000ff;">)) == </span></span><span style="color: #010001;" lang="EN-US">INVALID_SOCKET</span><span lang="EN-US"><span style="color: #0000ff;">)</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small;"><span style="color: #0000ff;"><span style="font-family: 新宋体;"><span style="mso-tab-count: 2;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>{</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="color: #0000ff;"><span style="mso-tab-count: 3;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="mso-spacerun: yes;">&nbsp;</span></span></span><span style="color: #010001;" lang="EN-US">printf</span><span lang="EN-US"><span style="color: #0000ff;">(</span></span><span style="color: #a31515;" lang="EN-US">"recvfrom failed: %d/n"</span><span lang="EN-US"><span style="color: #0000ff;">, </span></span><span style="color: #010001;" lang="EN-US">WSAGetLastError</span><span lang="EN-US"><span style="color: #0000ff;">());</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small;"><span style="color: #0000ff;"><span style="font-family: 新宋体;"><span style="mso-tab-count: 3;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="mso-spacerun: yes;">&nbsp;</span>return;</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small;"><span style="color: #0000ff;"><span style="font-family: 新宋体;"><span style="mso-tab-count: 2;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small; color: #0000ff; font-family: 新宋体;">&nbsp;</span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 2;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">ticks</span><span lang="EN-US"><span style="color: #0000ff;"> = </span></span><span style="color: #010001;" lang="EN-US">time</span><span lang="EN-US"><span style="color: #0000ff;">(</span></span><span style="color: #010001;" lang="EN-US">NULL</span><span lang="EN-US"><span style="color: #0000ff;">);</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 2;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">_snprintf</span><span lang="EN-US"><span style="color: #0000ff;">(</span></span><span style="color: #010001;" lang="EN-US">sendline</span><span lang="EN-US"><span style="color: #0000ff;">, sizeof(</span></span><span style="color: #010001;" lang="EN-US">sendline</span><span lang="EN-US"><span style="color: #0000ff;">), </span></span><span style="color: #a31515;" lang="EN-US">"%.24s/r/n"</span><span lang="EN-US"><span style="color: #0000ff;">, </span></span><span style="color: #010001;" lang="EN-US">ctime</span><span lang="EN-US"><span style="color: #0000ff;">(&amp;</span></span><span style="color: #010001;" lang="EN-US">ticks</span><span lang="EN-US"><span style="color: #0000ff;">));</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small; color: #0000ff; font-family: 新宋体;">&nbsp;</span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 2;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">sendto</span><span lang="EN-US"><span style="color: #0000ff;">(</span></span><span style="color: #010001;" lang="EN-US">sockfd</span><span lang="EN-US"><span style="color: #0000ff;">, </span></span><span style="color: #010001;" lang="EN-US">sendline</span><span lang="EN-US"><span style="color: #0000ff;">, </span></span><span style="color: #010001;" lang="EN-US">strlen</span><span lang="EN-US"><span style="color: #0000ff;">(</span></span><span style="color: #010001;" lang="EN-US">sendline</span><span lang="EN-US"><span style="color: #0000ff;">), 0, </span></span><span style="color: #010001;" lang="EN-US">pcliaddr</span><span lang="EN-US"><span style="color: #0000ff;">, </span></span><span style="color: #010001;" lang="EN-US">len</span><span lang="EN-US"><span style="color: #0000ff;">);</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small;"><span style="color: #0000ff;"><span style="font-family: 新宋体;"><span style="mso-tab-count: 1;">&nbsp;&nbsp;&nbsp; </span>}</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small; color: #0000ff; font-family: 新宋体;">}</span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small; color: #0000ff; font-family: 新宋体;">&nbsp;</span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small; color: #0000ff; font-family: 新宋体;">&nbsp;</span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="color: #0000ff;">int </span></span><span style="color: #010001;" lang="EN-US">main</span><span lang="EN-US"><span style="color: #0000ff;">(int </span></span><span style="color: #010001;" lang="EN-US">argc</span><span lang="EN-US"><span style="color: #0000ff;">, char **</span></span><span style="color: #010001;" lang="EN-US">argv</span><span lang="EN-US"><span style="color: #0000ff;">)</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small; color: #0000ff; font-family: 新宋体;">{</span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 1;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">WORD</span><span lang="EN-US"><span style="color: #0000ff;"> </span></span><span style="color: #010001;" lang="EN-US">wVersionRequested</span><span lang="EN-US"><span style="color: #0000ff;"> = 0;</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 1;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">WSADATA</span><span lang="EN-US"><span style="color: #0000ff;"> </span></span><span style="color: #010001;" lang="EN-US">wsaData</span><span lang="EN-US"><span style="color: #0000ff;">;</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="color: #0000ff;"><span style="mso-tab-count: 1;">&nbsp;&nbsp;&nbsp; </span>int </span></span><span style="color: #010001;" lang="EN-US">err</span><span lang="EN-US"><span style="color: #0000ff;">;</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small; color: #0000ff; font-family: 新宋体;">&nbsp;</span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 1;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">wVersionRequested</span><span lang="EN-US"><span style="color: #0000ff;"> = </span></span><span style="color: #010001;" lang="EN-US">MAKEWORD</span><span lang="EN-US"><span style="color: #0000ff;">( 2, 2 );</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small; color: #0000ff; font-family: 新宋体;">&nbsp;</span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 1;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: green;" lang="EN-US">// windows</span><span style="color: green;">下此初始化为必须，实际是初始化<span lang="EN-US">WinsockDLL</span>的过程<span lang="EN-US"></span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 1;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">err</span><span lang="EN-US"><span style="color: #0000ff;"> = </span></span><span style="color: #010001;" lang="EN-US">WSAStartup</span><span lang="EN-US"><span style="color: #0000ff;">( </span></span><span style="color: #010001;" lang="EN-US">wVersionRequested</span><span lang="EN-US"><span style="color: #0000ff;">, &amp;</span></span><span style="color: #010001;" lang="EN-US">wsaData</span><span lang="EN-US"><span style="color: #0000ff;"> );</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="color: #0000ff;"><span style="mso-tab-count: 1;">&nbsp;&nbsp;&nbsp; </span>if ( </span></span><span style="color: #010001;" lang="EN-US">err</span><span lang="EN-US"><span style="color: #0000ff;"> != 0 ) {</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small;"><span style="color: #0000ff;"><span style="font-family: 新宋体;"><span style="mso-tab-count: 2;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>return -1;</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small;"><span style="color: #0000ff;"><span style="font-family: 新宋体;"><span style="mso-tab-count: 1;">&nbsp;&nbsp;&nbsp; </span>}</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small; color: #0000ff; font-family: 新宋体;">&nbsp;</span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 1;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">SOCKET</span><span lang="EN-US"><span style="mso-spacerun: yes;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">sockfd</span><span lang="EN-US"><span style="color: #0000ff;">;</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="color: #0000ff;"><span style="mso-tab-count: 1;">&nbsp;&nbsp;&nbsp; </span>struct </span></span><span style="color: #010001;" lang="EN-US">sockaddr_in</span><span lang="EN-US"><span style="mso-spacerun: yes;"><span style="color: #0000ff;">&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">servaddr</span><span lang="EN-US"><span style="color: #0000ff;">,</span></span><span style="color: #010001;" lang="EN-US">cliaddr</span><span lang="EN-US"><span style="color: #0000ff;">;</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 1;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">sockfd</span><span lang="EN-US"><span style="color: #0000ff;"> = </span></span><span style="color: #010001;" lang="EN-US">socket</span><span lang="EN-US"><span style="color: #0000ff;">(</span></span><span style="color: #010001;" lang="EN-US">AF_INET</span><span lang="EN-US"><span style="color: #0000ff;">, </span></span><span style="color: #010001;" lang="EN-US">SOCK_DGRAM</span><span lang="EN-US"><span style="color: #0000ff;">, 0);</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small; color: #0000ff; font-family: 新宋体;">&nbsp;</span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 1;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">ZeroMemory</span><span lang="EN-US"><span style="color: #0000ff;">(&amp;</span></span><span style="color: #010001;" lang="EN-US">servaddr</span><span lang="EN-US"><span style="color: #0000ff;">, sizeof(</span></span><span style="color: #010001;" lang="EN-US">servaddr</span><span lang="EN-US"><span style="color: #0000ff;">));</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 1;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">servaddr</span><span lang="EN-US"><span style="color: #0000ff;">.</span></span><span style="color: #010001;" lang="EN-US">sin_family</span><span lang="EN-US"><span style="color: #0000ff;"><span style="mso-spacerun: yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>= </span></span><span style="color: #010001;" lang="EN-US">AF_INET</span><span lang="EN-US"><span style="color: #0000ff;">;</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 1;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">servaddr</span><span lang="EN-US"><span style="color: #0000ff;">.</span></span><span style="color: #010001;" lang="EN-US">sin_addr</span><span lang="EN-US"><span style="color: #0000ff;">.</span></span><span style="color: #010001;" lang="EN-US">s_addr</span><span lang="EN-US"><span style="color: #0000ff;"> = </span></span><span style="color: #010001;" lang="EN-US">htonl</span><span lang="EN-US"><span style="color: #0000ff;">(</span></span><span style="color: #010001;" lang="EN-US">INADDR_ANY</span><span lang="EN-US"><span style="color: #0000ff;">);</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 1;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">servaddr</span><span lang="EN-US"><span style="color: #0000ff;">.</span></span><span style="color: #010001;" lang="EN-US">sin_port</span><span lang="EN-US"><span style="color: #0000ff;"><span style="mso-spacerun: yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>= </span></span><span style="color: #010001;" lang="EN-US">htons</span><span lang="EN-US"><span style="color: #0000ff;">(13);<span style="mso-spacerun: yes;">&nbsp; </span></span></span><span style="color: green;" lang="EN-US">/* daytime server */</span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="color: green;" lang="EN-US"><span style="font-size: small; font-family: 新宋体;">&nbsp;</span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="color: #0000ff;"><span style="mso-tab-count: 1;">&nbsp;&nbsp;&nbsp; </span>if( </span></span><span style="color: #010001;" lang="EN-US">bind</span><span lang="EN-US"><span style="color: #0000ff;">(</span></span><span style="color: #010001;" lang="EN-US">sockfd</span><span lang="EN-US"><span style="color: #0000ff;">, (struct </span></span><span style="color: #010001;" lang="EN-US">sockaddr</span><span lang="EN-US"><span style="color: #0000ff;"> *) &amp;</span></span><span style="color: #010001;" lang="EN-US">servaddr</span><span lang="EN-US"><span style="color: #0000ff;">, sizeof(</span></span><span style="color: #010001;" lang="EN-US">servaddr</span><span lang="EN-US"><span style="color: #0000ff;">))</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="color: #0000ff;"><span style="mso-tab-count: 2;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>== </span></span><span style="color: #010001;" lang="EN-US">SOCKET_ERROR</span><span lang="EN-US"><span style="color: #0000ff;">) </span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small;"><span style="color: #0000ff;"><span style="font-family: 新宋体;"><span style="mso-tab-count: 1;">&nbsp;&nbsp;&nbsp; </span>{</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 2;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">printf</span><span lang="EN-US"><span style="color: #0000ff;">(</span></span><span style="color: #a31515;" lang="EN-US">"bind failed: %d/n"</span><span lang="EN-US"><span style="color: #0000ff;">, </span></span><span style="color: #010001;" lang="EN-US">WSAGetLastError</span><span lang="EN-US"><span style="color: #0000ff;">());</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 2;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">closesocket</span><span lang="EN-US"><span style="color: #0000ff;">(</span></span><span style="color: #010001;" lang="EN-US">sockfd</span><span lang="EN-US"><span style="color: #0000ff;">);</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 2;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">WSACleanup</span><span lang="EN-US"><span style="color: #0000ff;">();</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small;"><span style="color: #0000ff;"><span style="font-family: 新宋体;"><span style="mso-tab-count: 2;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>return 1;</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small;"><span style="color: #0000ff;"><span style="font-family: 新宋体;"><span style="mso-tab-count: 1;">&nbsp;&nbsp;&nbsp; </span>}</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small; color: #0000ff; font-family: 新宋体;">&nbsp;</span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 1;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">str_svr</span><span lang="EN-US"><span style="color: #0000ff;">(</span></span><span style="color: #010001;" lang="EN-US">sockfd</span><span lang="EN-US"><span style="color: #0000ff;">, (struct </span></span><span style="color: #010001;" lang="EN-US">sockaddr</span><span lang="EN-US"><span style="color: #0000ff;">*)&amp;</span></span><span style="color: #010001;" lang="EN-US">cliaddr</span><span lang="EN-US"><span style="color: #0000ff;">, sizeof(</span></span><span style="color: #010001;" lang="EN-US">cliaddr</span><span lang="EN-US"><span style="color: #0000ff;">));</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small; color: #0000ff; font-family: 新宋体;">&nbsp;</span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 1;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">closesocket</span><span lang="EN-US"><span style="color: #0000ff;">(</span></span><span style="color: #010001;" lang="EN-US">sockfd</span><span lang="EN-US"><span style="color: #0000ff;">);</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 1;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">WSACleanup</span><span lang="EN-US"><span style="color: #0000ff;">();</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small;"><span style="color: #0000ff;"><span style="font-family: 新宋体;"><span style="mso-tab-count: 1;">&nbsp;&nbsp;&nbsp; </span>return 1;</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small; color: #0000ff; font-family: 新宋体;">}</span></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><span style="font-size: 12pt; line-height: 115%; font-family: &ETH;&Acirc;&Euml;&Icirc;&Igrave;&aring;; mso-fareast-language: ZH-CN; mso-bidi-font-family: 'Times New Roman'; mso-bidi-language: AR-SA; mso-no-proof: yes;" lang="EN-US"><span style="font-family: Calibri;">&nbsp;</span></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><span style="font-size: large;"><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA; mso-no-proof: yes;">与上篇文章中</span><span style="mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA; mso-no-proof: yes;" lang="EN-US"><span style="font-family: Calibri;">tcp</span></span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA; mso-no-proof: yes;">服务器的例子很像，基本上来说，用</span><span style="mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA; mso-no-proof: yes;" lang="EN-US"><span style="font-family: Calibri;">socket</span></span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA; mso-no-proof: yes;">写客户端还是相对简单一些，但是写个服务器就相对要复杂很多，这个例子还没有精细的判断每个返回值（比如</span><span style="mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA; mso-no-proof: yes;" lang="EN-US"><span style="font-family: Calibri;">send</span></span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA; mso-no-proof: yes;">函数），但是已经比较复杂了。</span><span style="mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA; mso-no-proof: yes;" lang="EN-US"></span></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><span style="font-size: large;"><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;">接着是</span><span style="mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;" lang="EN-US"><span style="font-family: Calibri;">asio</span></span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;">版本：</span><span style="mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;" lang="EN-US"></span></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><span style="mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;" lang="EN-US"><span style="font-size: large; font-family: Calibri;">&nbsp;</span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="color: #0000ff;">#include </span></span><span style="color: #a31515;" lang="EN-US">&lt;ctime&gt;</span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="color: #0000ff;">#include </span></span><span style="color: #a31515;" lang="EN-US">&lt;iostream&gt;</span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="color: #0000ff;">#include </span></span><span style="color: #a31515;" lang="EN-US">&lt;string&gt;</span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="color: #0000ff;">#include </span></span><span style="color: #a31515;" lang="EN-US">&lt;boost/array.hpp&gt;</span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="color: #0000ff;">#include </span></span><span style="color: #a31515;" lang="EN-US">&lt;boost/asio.hpp&gt;</span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="color: #0000ff;">using </span></span><span style="color: #010001;" lang="EN-US">boost</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">asio</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">ip</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">udp</span><span lang="EN-US"><span style="color: #0000ff;">;</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span style="color: #010001;" lang="EN-US">std</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">string</span><span lang="EN-US"><span style="color: #0000ff;"> </span></span><span style="color: #010001;" lang="EN-US">make_daytime_string</span><span lang="EN-US"><span style="color: #0000ff;">()</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small; color: #0000ff; font-family: 新宋体;">{</span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="color: #0000ff;"><span style="mso-tab-count: 1;">&nbsp;&nbsp;&nbsp; </span>using namespace </span></span><span style="color: #010001;" lang="EN-US">std</span><span lang="EN-US"><span style="color: #0000ff;">; </span></span><span style="color: green;" lang="EN-US">// For time_t, time and ctime;</span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 1;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">time_t</span><span lang="EN-US"><span style="color: #0000ff;"> </span></span><span style="color: #010001;" lang="EN-US">now</span><span lang="EN-US"><span style="color: #0000ff;"> = </span></span><span style="color: #010001;" lang="EN-US">time</span><span lang="EN-US"><span style="color: #0000ff;">(0);</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="color: #0000ff;"><span style="mso-tab-count: 1;">&nbsp;&nbsp;&nbsp; </span>return </span></span><span style="color: #010001;" lang="EN-US">ctime</span><span lang="EN-US"><span style="color: #0000ff;">(&amp;</span></span><span style="color: #010001;" lang="EN-US">now</span><span lang="EN-US"><span style="color: #0000ff;">);</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small; color: #0000ff; font-family: 新宋体;">}</span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="color: #0000ff;">int </span></span><span style="color: #010001;" lang="EN-US">main</span><span lang="EN-US"><span style="color: #0000ff;">()</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small; color: #0000ff; font-family: 新宋体;">{</span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small;"><span style="color: #0000ff;"><span style="font-family: 新宋体;"><span style="mso-tab-count: 1;">&nbsp;&nbsp;&nbsp; </span>try</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small;"><span style="color: #0000ff;"><span style="font-family: 新宋体;"><span style="mso-tab-count: 1;">&nbsp;&nbsp;&nbsp; </span>{</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 2;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">boost</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">asio</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">io_service</span><span lang="EN-US"><span style="color: #0000ff;"> </span></span><span style="color: #010001;" lang="EN-US">io_service</span><span lang="EN-US"><span style="color: #0000ff;">;</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 2;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">udp</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">socket</span><span lang="EN-US"><span style="color: #0000ff;"> </span></span><span style="color: #010001;" lang="EN-US">socket</span><span lang="EN-US"><span style="color: #0000ff;">(</span></span><span style="color: #010001;" lang="EN-US">io_service</span><span lang="EN-US"><span style="color: #0000ff;">, </span></span><span style="color: #010001;" lang="EN-US">udp</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">endpoint</span><span lang="EN-US"><span style="color: #0000ff;">(</span></span><span style="color: #010001;" lang="EN-US">udp</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">v4</span><span lang="EN-US"><span style="color: #0000ff;">(), 13));</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small;"><span style="color: #0000ff;"><span style="font-family: 新宋体;"><span style="mso-tab-count: 2;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>for (;;)</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small;"><span style="color: #0000ff;"><span style="font-family: 新宋体;"><span style="mso-tab-count: 2;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>{</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 3;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">boost</span><span lang="EN-US"><span style="color: #0000ff;">::array&lt;char, 1&gt; </span></span><span style="color: #010001;" lang="EN-US">recv_buf</span><span lang="EN-US"><span style="color: #0000ff;">;</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 3;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">udp</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">endpoint</span><span lang="EN-US"><span style="color: #0000ff;"> </span></span><span style="color: #010001;" lang="EN-US">remote_endpoint</span><span lang="EN-US"><span style="color: #0000ff;">;</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 3;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">boost</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">system</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">error_code</span><span lang="EN-US"><span style="color: #0000ff;"> </span></span><span style="color: #010001;" lang="EN-US">error</span><span lang="EN-US"><span style="color: #0000ff;">;</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 3;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">socket</span><span lang="EN-US"><span style="color: #0000ff;">.</span></span><span style="color: #010001;" lang="EN-US">receive_from</span><span lang="EN-US"><span style="color: #0000ff;">(</span></span><span style="color: #010001;" lang="EN-US">boost</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">asio</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">buffer</span><span lang="EN-US"><span style="color: #0000ff;">(</span></span><span style="color: #010001;" lang="EN-US">recv_buf</span><span lang="EN-US"><span style="color: #0000ff;">),</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 4;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">remote_endpoint</span><span lang="EN-US"><span style="color: #0000ff;">, 0, </span></span><span style="color: #010001;" lang="EN-US">error</span><span lang="EN-US"><span style="color: #0000ff;">);</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="color: #0000ff;"><span style="mso-tab-count: 3;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>if (</span></span><span style="color: #010001;" lang="EN-US">error</span><span lang="EN-US"><span style="color: #0000ff;"> &amp;&amp; </span></span><span style="color: #010001;" lang="EN-US">error</span><span lang="EN-US"><span style="color: #0000ff;"> != </span></span><span style="color: #010001;" lang="EN-US">boost</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">asio</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">error</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">message_size</span><span lang="EN-US"><span style="color: #0000ff;">)</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="color: #0000ff;"><span style="mso-tab-count: 4;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>throw </span></span><span style="color: #010001;" lang="EN-US">boost</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">system</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">system_error</span><span lang="EN-US"><span style="color: #0000ff;">(</span></span><span style="color: #010001;" lang="EN-US">error</span><span lang="EN-US"><span style="color: #0000ff;">);</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 3;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">std</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">string</span><span lang="EN-US"><span style="color: #0000ff;"> </span></span><span style="color: #010001;" lang="EN-US">message</span><span lang="EN-US"><span style="color: #0000ff;"> = </span></span><span style="color: #010001;" lang="EN-US">make_daytime_string</span><span lang="EN-US"><span style="color: #0000ff;">();</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 3;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">boost</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">system</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">error_code</span><span lang="EN-US"><span style="color: #0000ff;"> </span></span><span style="color: #010001;" lang="EN-US">ignored_error</span><span lang="EN-US"><span style="color: #0000ff;">;</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 3;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">socket</span><span lang="EN-US"><span style="color: #0000ff;">.</span></span><span style="color: #010001;" lang="EN-US">send_to</span><span lang="EN-US"><span style="color: #0000ff;">(</span></span><span style="color: #010001;" lang="EN-US">boost</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">asio</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">buffer</span><span lang="EN-US"><span style="color: #0000ff;">(</span></span><span style="color: #010001;" lang="EN-US">message</span><span lang="EN-US"><span style="color: #0000ff;">),</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 4;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">remote_endpoint</span><span lang="EN-US"><span style="color: #0000ff;">, 0, </span></span><span style="color: #010001;" lang="EN-US">ignored_error</span><span lang="EN-US"><span style="color: #0000ff;">);</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small;"><span style="color: #0000ff;"><span style="font-family: 新宋体;"><span style="mso-tab-count: 2;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small;"><span style="color: #0000ff;"><span style="font-family: 新宋体;"><span style="mso-tab-count: 1;">&nbsp;&nbsp;&nbsp; </span>}</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="color: #0000ff;"><span style="mso-tab-count: 1;">&nbsp;&nbsp;&nbsp; </span>catch (</span></span><span style="color: #010001;" lang="EN-US">std</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">exception</span><span lang="EN-US"><span style="color: #0000ff;">&amp; </span></span><span style="color: #010001;" lang="EN-US">e</span><span lang="EN-US"><span style="color: #0000ff;">)</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small;"><span style="color: #0000ff;"><span style="font-family: 新宋体;"><span style="mso-tab-count: 1;">&nbsp;&nbsp;&nbsp; </span>{</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-family: 新宋体;"><span lang="EN-US"><span style="mso-tab-count: 2;"><span style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="color: #010001;" lang="EN-US">std</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">cerr</span><span lang="EN-US"><span style="color: #0000ff;"> &lt;&lt; </span></span><span style="color: #010001;" lang="EN-US">e</span><span lang="EN-US"><span style="color: #0000ff;">.</span></span><span style="color: #010001;" lang="EN-US">what</span><span lang="EN-US"><span style="color: #0000ff;">() &lt;&lt; </span></span><span style="color: #010001;" lang="EN-US">std</span><span lang="EN-US"><span style="color: #0000ff;">::</span></span><span style="color: #010001;" lang="EN-US">endl</span><span lang="EN-US"><span style="color: #0000ff;">;</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small;"><span style="color: #0000ff;"><span style="font-family: 新宋体;"><span style="mso-tab-count: 1;">&nbsp;&nbsp;&nbsp; </span>}</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small;"><span style="color: #0000ff;"><span style="font-family: 新宋体;"><span style="mso-tab-count: 1;">&nbsp;&nbsp;&nbsp; </span>return 0;</span></span></span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small; color: #0000ff; font-family: 新宋体;">}</span></span></p>
<p class="C" style="margin: 0cm 0cm 0pt;"><span lang="EN-US"><span style="font-size: small; color: #0000ff; font-family: 新宋体;">&nbsp;</span></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><span style="font-size: large;"><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN;">我甚至觉得在</span><span style="mso-fareast-language: ZH-CN;" lang="EN-US"><span style="font-family: Calibri;">asio</span></span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN;">中写服务器比写客户端更加简单</span><span style="mso-fareast-language: ZH-CN;" lang="EN-US"><span style="font-family: Calibri;">-_-!</span></span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN;">也许一开始</span><span style="mso-fareast-language: ZH-CN;" lang="EN-US"><span style="font-family: Calibri;">asio</span></span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN;">就是为了写高性能服务器而设计的，所以导致写客户端相对那么麻烦，但是写服务器却又简单很多吧。不过，熟悉</span><span style="mso-fareast-language: ZH-CN;" lang="EN-US"><span style="font-family: Calibri;">socket API</span></span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN;">对于使用</span><span style="mso-fareast-language: ZH-CN;" lang="EN-US"><span style="font-family: Calibri;">asio</span></span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN;">也是有意义的，比如这里的</span><span style="color: #010001; mso-fareast-language: ZH-CN; mso-no-proof: yes;" lang="EN-US"><span style="font-family: Calibri;">receive_from,send_to</span></span><span style="color: #010001; font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN; mso-no-proof: yes;">不过是对应的</span><span style="color: #010001; mso-fareast-language: ZH-CN; mso-no-proof: yes;" lang="EN-US"><span style="font-family: Calibri;">socket API</span></span><span style="color: #010001; font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN; mso-no-proof: yes;">函数换汤不换药的版本而已，使用起来除了参数传递方式上的变化，最后效果一致。</span><span style="color: #010001; mso-fareast-language: ZH-CN; mso-no-proof: yes;" lang="EN-US"></span></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><span style='color: #a020f0; font-family: "Courier New"; mso-fareast-language: ZH-CN;' lang="EN-US"><span style="font-size: large;">&nbsp;</span></span></p>
<h2 style="margin: 13pt 0cm 13pt 21pt;"><span style="mso-fareast-font-family: Cambria; mso-fareast-theme-font: major-latin; mso-fareast-language: ZH-CN; mso-bidi-font-family: Cambria; mso-bidi-theme-font: major-latin; mso-bidi-language: AR-SA;" lang="EN-US"><span style="mso-list: Ignore;"><span style="font-size: large; font-family: Cambria;">3.</span><span style='font: 7pt "Times New Roman";'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="font-size: large;"><span style="mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;" lang="EN-US"><span style="font-family: Cambria;">An asynchronous UDP daytime server(</span></span><span style="font-family: 宋体; mso-ascii-font-family: Cambria; mso-ascii-theme-font: major-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: major-fareast; mso-hansi-font-family: Cambria; mso-hansi-theme-font: major-latin; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;">异步</span><span style="mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;" lang="EN-US"><span style="font-family: Cambria;"> UDP daytime </span></span><span style="font-family: 宋体; mso-ascii-font-family: Cambria; mso-ascii-theme-font: major-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: major-fareast; mso-hansi-font-family: Cambria; mso-hansi-theme-font: major-latin; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;">服务器</span><span style="mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;" lang="EN-US"><span style="font-family: Cambria;">)</span></span></span></h2>
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><span style="font-size: large;"><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;">又是有点意思了的程序了，</span><span style="mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;" lang="EN-US"><span style="font-family: Calibri;">asio</span></span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;">的命名就是表示异步的</span><span style="mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;" lang="EN-US"><span style="font-family: Calibri;">io</span></span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;">，所以展现异步的程序才能体现</span><span style="mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;" lang="EN-US"><span style="font-family: Calibri;">asio</span></span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;">的实力及其简化了底层操作的本事。</span><span style="mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;" lang="EN-US"><span style="font-family: Calibri;">TCP</span></span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;">的应用是这样，这里也不例外。</span><span style="mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;" lang="EN-US"></span></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><span style="font-size: large;"><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;">不过出于</span><span style="mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;" lang="EN-US"><span style="font-family: Calibri;">UDP</span></span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;">应用相对于</span><span style="mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;" lang="EN-US"><span style="font-family: Calibri;">TCP</span></span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;">应用本身的简单性，所以这个示例程序比对应的</span><span style="mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;" lang="EN-US"><span style="font-family: Calibri;">TCP</span></span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;">版本就要简化很多，只是，不知道</span><span style="mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;" lang="EN-US"><span style="font-family: Calibri;">asio</span></span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;">的</span><span style="mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;" lang="EN-US"><span style="font-family: Calibri;">UDP</span></span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;">实现了更丰富的</span><span style="mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;" lang="EN-US"><span style="font-family: Calibri;">UDP</span></span><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;">特性没有，比如超时重发等机制。。。。</span><span style="mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;" lang="EN-US"></span></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><span style='color: #a020f0; font-family: "Courier New"; mso-fareast-language: ZH-CN;' lang="EN-US"><span style="font-size: large;">&nbsp;</span></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 10pt; text-align: right;" align="right"><span lang="EN-US"><a href="http://www.jtianling.com"><span style="font-size: large;"><span style="color: #800080;"><strong><span style="letter-spacing: 0.25pt; font-variant: small-caps; mso-fareast-language: ZH-CN;"><span style="font-family: Calibri;">write by </span></span></strong><strong><span style="font-family: 宋体; letter-spacing: 0.25pt; font-variant: small-caps; mso-fareast-language: ZH-CN;" lang="EN-US"><span lang="EN-US">九天雁翎</span></span></strong><strong><span style="letter-spacing: 0.25pt; font-variant: small-caps; mso-fareast-language: ZH-CN;"><span style="font-family: Calibri;">(JTianLing) -- www.jtianling.com</span></span></strong></span></span></a></span><span style="mso-fareast-language: ZH-CN;" lang="EN-US"></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><span style="mso-fareast-language: ZH-CN;" lang="EN-US"><span style="font-size: large; font-family: Calibri;">&nbsp;</span></span></p>
