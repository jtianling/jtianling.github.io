---
layout: post
title: 添加4A,5A景区列表到Trello中, 顺面聊聊旅行
date: 2015-09-04
comments: true
categories: 编程
published: true
tags: 
- 旅游
---

又是很久没写博客了, 貌似最近写博客都需要用这个开头......
突然多了一个胜利日假期, 按最近的习惯, 我需要提前规划一下带孩子去哪玩, 作为一定程度的选择困难症患者, 我将所有的5A, 4A级景区用Checklist的形式添加到了Trello里面, 以方便规划, 下面是我抓回来的数据(从百度百科), 和添加到Trello里面的代码, 借由聊为什么选择路线困难, 顺面聊聊日常. 没兴趣看过程和日常的直接在[github](https://github.com/jtianling/ChineseAttractionsToTrello)上能找到弄好的4A, 5A景区列表数据和将其添加到trello中的代码.

<!-- more -->
<!-- toc-begin -->
**目录**:

* [关于旅行](#关于旅行)
* [景区评级](#景区评级)
* [数据来源](#数据来源)
* [数据处理](#数据处理)
* [trello](#trello)
* [使用](#使用)
* [最后](#最后)

<!-- toc-end -->

# 关于旅行

先说这次胜利日选择旅游路线的难度(自驾游), 解释下为啥突然想弄了这个东西.  
首先, 我出去玩主要是陪孩子, 而我孩子现在才3岁多点, 去哪都只能是亲子游的形式, 什么山啊, 峡谷啊, 就没法去了, 小孩根本没那个体力走那么远, 一年前带着他连香山都没爬到顶, 因为一路都要抱,  那也是我有记忆以来唯一一次爬山没登顶,(前提是我只去我能爬的上的山) 那还是香山.  而自然景点最常见的也就是各类名山峡谷啥的了, 都排除了.  
这次胜利日最麻烦的是, 整个北京周围都没法玩, 北京限号, 禁行就不说了, 同时这几天单双限号的还有天津, 保定, 石家庄, 秦皇岛, 沧州等周边城市, 于是就算仅仅只有三天, 我要么去近一点的张家口方向, 要么就只能走很远才能离开限行区域, 不然三天假期必然在中间那天限行.(我的车是单号)  这也给选择带来很大难度.  
然后, 最近这两年的确是把周边很多值得一去的景区都去过了, 选择少了很多, 好吧, 我承认最近几年博客写的少了, 是因为我放假的时候都出去旅行了-_-! 具体去了多少地方, 我最喜欢展示携程app用酒店订单(少量不是用携程定的酒店, 自己手动添加)生成的一张图片来说明.
![携程app-一生的旅行](/public/images/2015/one-life-travel.jpg)

携程把这个图起的名字很有意思, 叫一生的旅行.  

综上所述, 找个能去的地方其实还挺难的, 于是我想找个参考.  

# 景区评级

对于国内来说, 景点的评级还是挺有参考价值的, 特别是5A景区, 我去过基本没有失望过, 假如按照类似米其林的推荐方式来说的话, 我是这么看的:

- 5A级景区, 是值得专程前往的
- 4A级景区, 是值得绕路前去的 
- 3A级景区, 路过又有空的时候不妨一看

比如, 我去年国庆为了去沙坡头, 特意赶到银川, 现在想想也挺值.  不过, 需要提醒一下的是, 国内的景区评级最近有泛滥之势, 有的纯后天打造人工景区因为商业化厉害, 有的感觉是为了照顾地区差异, 甚至有的是因为红色景区特别待遇, 就能评上很高的星级,  有了更多水份, 一般来说, 同样级别景点, 评定时间越早的越靠谱, 类似故宫颐和园长城这种国家名片级别的景点, 要是将来评6A景点, 也一定是第一批.  
不过, 为了不误导大家, 我需要特别提醒的是, 能评上5A的, 多少来说, 怎么都还有值得一去的理由, 但是, 一定要但是, 没有评上高级别的景点并不是一定就不值得去, 以我自从去过, 几乎每年都去的木兰围场为例, 貌似就没有评上什么几A级, 但是, 绝对值得一去再去.  

# 数据来源

5A景点相对较少, 目前一共200个, 直接从[百度百科](http://baike.baidu.com/view/3724885.htm?fromtitle=%E5%9B%BD%E5%AE%B65A%E7%BA%A7%E6%97%85%E6%B8%B8%E6%99%AF%E5%8C%BA)的表格上复制下来, 差不多是准确的, 还写明了每个批次的添加情况.
4A景区就太多了, 不仅感觉[百度百科](http://baike.baidu.com/view/2594132.htm?fromtitle=4A%E7%BA%A7%E6%99%AF%E5%8C%BA)的数据没有更新最新的景区, 还有不少错误(比如把成都4A杜甫草堂弄成了三台的了, 我在百科上已提交更改并通过), 重复, 名字混乱等情况, 并且这个数据国家旅游局是没有统一收录和提供查询途径的, 只能在各个省的旅游局查(还不一定有), 所以我暂时也只能以百度百科的为准了.  
其实更让人抓狂的是, 百度百科作为一个网友维护的数据, 感觉每个省是分别由不同的人形成的数据, 省份和省份之间的表格格式都不一样, 还是有vim......不然整理数据都是要命的.  
为了整理方便, 不管是4A还是5A景区的数据, 我最后都以省份作为开头, 空行作为省份的分割线, 并且除此外没有添加任何额外数据, 尽量保留百度百科原来有的数据信息, 只是我程序处理的时候, 只获取了我需要的, 那就是省份名字和景区名字.  
大概的样子如下:

~~~
北京市 7 
故宫博物院 2007年
天坛公园 2007年
颐和园 2007年
八达岭—慕田峪长城旅游区 2007年
明十三陵景区(神路-定陵-长陵-昭陵) 2011年
恭王府景区 2012年
北京奥林匹克公园(鸟巢-水立方-中国科技馆-国家奥林匹克森林公园) 2012年

天津市 2 
天津古文化街旅游区（津门故里） 2007年
天津蓟县盘山风景名胜区 2007年

河北省 5 
承德避暑山庄及周围寺庙景区（普陀宗乘-须弥福寺-普宁寺-普佑寺） 2007年
秦皇岛山海关景区（老龙头-山海关古城-天下第一关-孟姜女庙） 2007年
保定安新白洋淀景区（文化苑-大观园-鸳鸯岛-元妃荷园-嘎子印象-渔人乐园） 2007年
保定涞水县野三坡景区（百里峡-白草畔-鱼谷洞-龙门天关） 2011年
石家庄平山县西柏坡景区 2011年
~~~

还算是方便程序处理的, 虽然没有真的做成什么json, xml格式. 并且, 国内貌似也找不到更好的格式了, 除非....你用我的代码, 将这个格式的数据解析了, 再按照json输出.....
你要是对我的代码不感兴趣, 仅仅对5A,4A的数据感兴趣, 这两个数据文件也是挺有用的.  

# 数据处理

我用的是ruby, 虽然很久没用ruby了, 但是ruby还是我印象中最适合这种小script式的语言, 并且也是写起来最有乐趣的.  主要逻辑就是按行读取, 判断是空行就新建一个省份, 作为简单的script, 就没有建立任何数据结构, 直接用字典套数组的方式存储并返回了.  

# trello

[trello](trello.com)中的card支持checklist, 并且还是多个可命名的checklist, 挺适合用于添加和存储这些信息, 不仅可做旅行路线规划的决策, 还能作为一个真正的checklist来用, 看看你去过了多少个地方.  
我在程序中使用了ruby的trello api封装库[ruby-trello](https://github.com/jeremytregunna/ruby-trello), 其实原来的API是rest的, 可能直接用ruby rest相关库使用也很简单.

# 使用

按照trello ruby api封装库中的描述, 获得对应的key, 选择你要添加的trello card, 通过修改代码的时候配置好运行环境, 运行即可(我只在ruby 2.2.2上测试过) 别怪我懒, 我连console命令参数的方式传这些数据都感觉太麻烦.  
另外需要说明的是, 可能是因为添加的过于频繁的话, trello那边会使api调用失败, 所以我尝试了多次程序, 每次添加都会碰到错误, 但是不像是程序的错误, 所以我在程序中添加了通过修改代码实现从中间某个省份开始添加的功能.(见代码的注释, 不嫌慢的话, 直接再次运行程序也是可以的, 有自动排重措施)

# 最后

虽然看到我一生的旅行那张图, 全国各地很多地方都去过了, 我老婆有一次跟她妹妹描述的时候甚至说全国什么5A, 4A景区我们基本都去过了, 当时虽然听起来感觉有哪不对劲, 但是也没有想太多, 等我真的把5A, 4A景区都添加进trello, 然后作为checklist把去过的景区都勾掉后, 实际的数据说明我们只能说全国的5A, 4A景区我们基本都没有去过...... 实际的情况如下图所示:

![去过的5A,4A景区](/public/images/2015/5A-4A-visited.png)

添加完以后的效果还是不错的, 都是按照省份分割:
![5A,4A景区列表截图](/public/images/2015/5A-4A-checklist-sample.png)
