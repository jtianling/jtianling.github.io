---
layout: post
title: "数据结构 链表的lua实现 仿照C++中list 实现"
categories:
- Lua
- "算法"
tags:
- Lua
status: publish
type: post
published: true
meta:
  ratings_users: '0'
  ratings_score: '0'
  ratings_average: '0'
  views: '11'
author:
  login: jtianling
  email: jtianling@gmail.com
  display_name: jtianling
  first_name: ''
  last_name: ''
---
<p>
&nbsp;<!--[if gte mso 9]&gt;&lt;xml&gt;<br />
 &lt;o:OfficeDocumentSettings&gt;<br />
  &lt;o:RelyOnVML /&gt;<br />
  &lt;o:AllowPNG /&gt;<br />
 &lt;/o:OfficeDocumentSettings&gt;<br />
&lt;/xml&gt;&lt;![endif]-->
<link rel="themeData" href="file:///C:%5CDOCUME%7E1%5CADMINI%7E1%5CLOCALS%7E1%5CTemp%5Cmsohtmlclip1%5C01%5Cclip_themedata.thmx" />
<link rel="colorSchemeMapping" href="file:///C:%5CDOCUME%7E1%5CADMINI%7E1%5CLOCALS%7E1%5CTemp%5Cmsohtmlclip1%5C01%5Cclip_colorschememapping.xml" /><!--[if gte mso 9]&gt;&lt;xml&gt;<br />
 &lt;w:WordDocument&gt;<br />
  &lt;w:View&gt;Normal&lt;/w:View&gt;<br />
  &lt;w:Zoom&gt;0&lt;/w:Zoom&gt;<br />
  &lt;w:TrackMoves /&gt;<br />
  &lt;w:TrackFormatting /&gt;<br />
  &lt;w:PunctuationKerning /&gt;<br />
  &lt;w:DrawingGridVerticalSpacing&gt;7.8 磅&lt;/w:DrawingGridVerticalSpacing&gt;<br />
  &lt;w:DisplayHorizontalDrawingGridEvery&gt;0&lt;/w:DisplayHorizontalDrawingGridEvery&gt;<br />
  &lt;w:DisplayVerticalDrawingGridEvery&gt;2&lt;/w:DisplayVerticalDrawingGridEvery&gt;<br />
  &lt;w:ValidateAgainstSchemas /&gt;<br />
  &lt;w:SaveIfXMLInvalid&gt;false&lt;/w:SaveIfXMLInvalid&gt;<br />
  &lt;w:IgnoreMixedContent&gt;false&lt;/w:IgnoreMixedContent&gt;<br />
  &lt;w:AlwaysShowPlaceholderText&gt;false&lt;/w:AlwaysShowPlaceholderText&gt;<br />
  &lt;w:DoNotPromoteQF /&gt;<br />
  &lt;w:LidThemeOther&gt;EN-US&lt;/w:LidThemeOther&gt;<br />
  &lt;w:LidThemeAsian&gt;ZH-CN&lt;/w:LidThemeAsian&gt;<br />
  &lt;w:LidThemeComplexScript&gt;X-NONE&lt;/w:LidThemeComplexScript&gt;<br />
  &lt;w:Compatibility&gt;<br />
   &lt;w:SpaceForUL /&gt;<br />
   &lt;w:BalanceSingleByteDoubleByteWidth /&gt;<br />
   &lt;w:DoNotLeaveBackslashAlone /&gt;<br />
   &lt;w:ULTrailSpace /&gt;<br />
   &lt;w:DoNotExpandShiftReturn /&gt;<br />
   &lt;w:AdjustLineHeightInTable /&gt;<br />
   &lt;w:BreakWrappedTables /&gt;<br />
   &lt;w:SnapToGridInCell /&gt;<br />
   &lt;w:WrapTextWithPunct /&gt;<br />
   &lt;w:UseAsianBreakRules /&gt;<br />
   &lt;w:DontGrowAutofit /&gt;<br />
   &lt;w:SplitPgBreakAndParaMark /&gt;<br />
   &lt;w:DontVertAlignCellWithSp /&gt;<br />
   &lt;w:DontBreakConstrainedForcedTables /&gt;<br />
   &lt;w:DontVertAlignInTxbx /&gt;<br />
   &lt;w:Word11KerningPairs /&gt;<br />
   &lt;w:CachedColBalance /&gt;<br />
   &lt;w:UseFELayout /&gt;<br />
  &lt;/w:Compatibility&gt;<br />
  &lt;m:mathPr&gt;<br />
   &lt;m:mathFont m:val="Cambria Math" /&gt;<br />
   &lt;m:brkBin m:val="before" /&gt;<br />
   &lt;m:brkBinSub m:val="&#45;-" /&gt;<br />
   &lt;m:smallFrac m:val="off" /&gt;<br />
   &lt;m:dispDef /&gt;<br />
   &lt;m:lMargin m:val="0" /&gt;<br />
   &lt;m:rMargin m:val="0" /&gt;<br />
   &lt;m:defJc m:val="centerGroup" /&gt;<br />
   &lt;m:wrapIndent m:val="1440" /&gt;<br />
   &lt;m:intLim m:val="subSup" /&gt;<br />
   &lt;m:naryLim m:val="undOvr" /&gt;<br />
  &lt;/m:mathPr&gt;&lt;/w:WordDocument&gt;<br />
&lt;/xml&gt;&lt;![endif]--><!--[if gte mso 9]&gt;&lt;xml&gt;<br />
 &lt;w:LatentStyles DefLockedState="false" DefUnhideWhenUsed="true"<br />
  DefSemiHidden="true" DefQFormat="false" DefPriority="99"<br />
  LatentStyleCount="267"&gt;<br />
  &lt;w:LsdException Locked="false" Priority="0" SemiHidden="false"<br />
   UnhideWhenUsed="false" QFormat="true" Name="Normal" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="9" SemiHidden="false"<br />
   UnhideWhenUsed="false" QFormat="true" Name="heading 1" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 2" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 3" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 4" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 5" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 6" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 7" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 8" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 9" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="39" Name="toc 1" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="39" Name="toc 2" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="39" Name="toc 3" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="39" Name="toc 4" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="39" Name="toc 5" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="39" Name="toc 6" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="39" Name="toc 7" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="39" Name="toc 8" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="39" Name="toc 9" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="35" QFormat="true" Name="caption" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="10" SemiHidden="false"<br />
   UnhideWhenUsed="false" QFormat="true" Name="Title" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="1" Name="Default Paragraph Font" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="11" SemiHidden="false"<br />
   UnhideWhenUsed="false" QFormat="true" Name="Subtitle" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="22" SemiHidden="false"<br />
   UnhideWhenUsed="false" QFormat="true" Name="Strong" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="20" SemiHidden="false"<br />
   UnhideWhenUsed="false" QFormat="true" Name="Emphasis" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="59" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Table Grid" /&gt;<br />
  &lt;w:LsdException Locked="false" UnhideWhenUsed="false" Name="Placeholder Text" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="1" SemiHidden="false"<br />
   UnhideWhenUsed="false" QFormat="true" Name="No Spacing" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="60" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Light Shading" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="61" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Light List" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="62" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Light Grid" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="63" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Medium Shading 1" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="64" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Medium Shading 2" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="65" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Medium List 1" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="66" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Medium List 2" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="67" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Medium Grid 1" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="68" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Medium Grid 2" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="69" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Medium Grid 3" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="70" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Dark List" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="71" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Colorful Shading" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="72" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Colorful List" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="73" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Colorful Grid" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="60" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Light Shading Accent 1" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="61" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Light List Accent 1" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="62" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Light Grid Accent 1" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="63" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 1" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="64" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 1" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="65" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Medium List 1 Accent 1" /&gt;<br />
  &lt;w:LsdException Locked="false" UnhideWhenUsed="false" Name="Revision" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="34" SemiHidden="false"<br />
   UnhideWhenUsed="false" QFormat="true" Name="List Paragraph" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="29" SemiHidden="false"<br />
   UnhideWhenUsed="false" QFormat="true" Name="Quote" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="30" SemiHidden="false"<br />
   UnhideWhenUsed="false" QFormat="true" Name="Intense Quote" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="66" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Medium List 2 Accent 1" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="67" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 1" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="68" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 1" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="69" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 1" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="70" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Dark List Accent 1" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="71" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Colorful Shading Accent 1" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="72" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Colorful List Accent 1" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="73" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Colorful Grid Accent 1" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="60" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Light Shading Accent 2" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="61" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Light List Accent 2" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="62" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Light Grid Accent 2" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="63" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 2" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="64" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 2" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="65" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Medium List 1 Accent 2" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="66" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Medium List 2 Accent 2" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="67" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 2" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="68" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 2" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="69" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 2" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="70" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Dark List Accent 2" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="71" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Colorful Shading Accent 2" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="72" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Colorful List Accent 2" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="73" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Colorful Grid Accent 2" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="60" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Light Shading Accent 3" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="61" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Light List Accent 3" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="62" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Light Grid Accent 3" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="63" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 3" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="64" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 3" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="65" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Medium List 1 Accent 3" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="66" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Medium List 2 Accent 3" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="67" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 3" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="68" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 3" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="69" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 3" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="70" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Dark List Accent 3" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="71" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Colorful Shading Accent 3" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="72" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Colorful List Accent 3" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="73" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Colorful Grid Accent 3" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="60" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Light Shading Accent 4" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="61" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Light List Accent 4" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="62" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Light Grid Accent 4" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="63" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 4" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="64" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 4" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="65" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Medium List 1 Accent 4" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="66" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Medium List 2 Accent 4" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="67" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 4" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="68" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 4" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="69" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 4" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="70" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Dark List Accent 4" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="71" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Colorful Shading Accent 4" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="72" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Colorful List Accent 4" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="73" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Colorful Grid Accent 4" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="60" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Light Shading Accent 5" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="61" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Light List Accent 5" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="62" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Light Grid Accent 5" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="63" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 5" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="64" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 5" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="65" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Medium List 1 Accent 5" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="66" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Medium List 2 Accent 5" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="67" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 5" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="68" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 5" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="69" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 5" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="70" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Dark List Accent 5" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="71" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Colorful Shading Accent 5" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="72" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Colorful List Accent 5" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="73" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Colorful Grid Accent 5" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="60" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Light Shading Accent 6" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="61" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Light List Accent 6" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="62" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Light Grid Accent 6" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="63" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 6" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="64" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 6" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="65" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Medium List 1 Accent 6" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="66" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Medium List 2 Accent 6" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="67" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 6" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="68" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 6" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="69" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 6" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="70" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Dark List Accent 6" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="71" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Colorful Shading Accent 6" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="72" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Colorful List Accent 6" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="73" SemiHidden="false"<br />
   UnhideWhenUsed="false" Name="Colorful Grid Accent 6" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="19" SemiHidden="false"<br />
   UnhideWhenUsed="false" QFormat="true" Name="Subtle Emphasis" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="21" SemiHidden="false"<br />
   UnhideWhenUsed="false" QFormat="true" Name="Intense Emphasis" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="31" SemiHidden="false"<br />
   UnhideWhenUsed="false" QFormat="true" Name="Subtle Reference" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="32" SemiHidden="false"<br />
   UnhideWhenUsed="false" QFormat="true" Name="Intense Reference" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="33" SemiHidden="false"<br />
   UnhideWhenUsed="false" QFormat="true" Name="Book Title" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="37" Name="Bibliography" /&gt;<br />
  &lt;w:LsdException Locked="false" Priority="39" QFormat="true" Name="TOC Heading" /&gt;<br />
 &lt;/w:LatentStyles&gt;<br />
&lt;/xml&gt;&lt;![endif]--><br />
<style>
<!--<br />
 /* Font Definitions */<br />
 @font-face<br />
	{font-family:宋体;<br />
	panose-1:2 1 6 0 3 1 1 1 1 1;<br />
	mso-font-alt:SimSun;<br />
	mso-font-charset:134;<br />
	mso-generic-font-family:auto;<br />
	mso-font-pitch:variable;<br />
	mso-font-signature:3 135135232 16 0 262145 0;}<br />
@font-face<br />
	{font-family:"Cambria Math";<br />
	panose-1:2 4 5 3 5 4 6 3 2 4;<br />
	mso-font-charset:0;<br />
	mso-generic-font-family:roman;<br />
	mso-font-pitch:variable;<br />
	mso-font-signature:-1610611985 1107304683 0 0 159 0;}<br />
@font-face<br />
	{font-family:Cambria;<br />
	panose-1:2 4 5 3 5 4 6 3 2 4;<br />
	mso-font-charset:0;<br />
	mso-generic-font-family:roman;<br />
	mso-font-pitch:variable;<br />
	mso-font-signature:-1610611985 1073741899 0 0 159 0;}<br />
@font-face<br />
	{font-family:Calibri;<br />
	panose-1:2 15 5 2 2 2 4 3 2 4;<br />
	mso-font-charset:0;<br />
	mso-generic-font-family:swiss;<br />
	mso-font-pitch:variable;<br />
	mso-font-signature:-1610611985 1073750139 0 0 159 0;}<br />
@font-face<br />
	{font-family:"/@宋体";<br />
	panose-1:2 1 6 0 3 1 1 1 1 1;<br />
	mso-font-charset:134;<br />
	mso-generic-font-family:auto;<br />
	mso-font-pitch:variable;<br />
	mso-font-signature:3 135135232 16 0 262145 0;}<br />
 /* Style Definitions */<br />
 p.MsoNormal, li.MsoNormal, div.MsoNormal<br />
	{mso-style-unhide:no;<br />
	mso-style-qformat:yes;<br />
	mso-style-parent:"";<br />
	margin-top:0cm;<br />
	margin-right:0cm;<br />
	margin-bottom:10.0pt;<br />
	margin-left:0cm;<br />
	line-height:115%;<br />
	mso-pagination:widow-orphan;<br />
	font-size:12.0pt;<br />
	mso-bidi-font-size:11.0pt;<br />
	font-family:"Calibri","sans-serif";<br />
	mso-ascii-font-family:Calibri;<br />
	mso-ascii-theme-font:minor-latin;<br />
	mso-fareast-font-family:宋体;<br />
	mso-fareast-theme-font:minor-fareast;<br />
	mso-hansi-font-family:Calibri;<br />
	mso-hansi-theme-font:minor-latin;<br />
	mso-bidi-font-family:"Times New Roman";<br />
	mso-bidi-theme-font:minor-bidi;<br />
	mso-fareast-language:EN-US;<br />
	mso-bidi-language:EN-US;}<br />
h1<br />
	{mso-style-priority:9;<br />
	mso-style-unhide:no;<br />
	mso-style-qformat:yes;<br />
	mso-style-link:"标题 1 Char";<br />
	mso-style-next:正文;<br />
	margin-top:24.0pt;<br />
	margin-right:0cm;<br />
	margin-bottom:0cm;<br />
	margin-left:0cm;<br />
	margin-bottom:.0001pt;<br />
	line-height:115%;<br />
	mso-pagination:widow-orphan lines-together;<br />
	page-break-after:avoid;<br />
	mso-outline-level:1;<br />
	font-size:16.0pt;<br />
	mso-bidi-font-size:14.0pt;<br />
	font-family:"Cambria","serif";<br />
	mso-ascii-font-family:Cambria;<br />
	mso-ascii-theme-font:major-latin;<br />
	mso-fareast-font-family:宋体;<br />
	mso-fareast-theme-font:major-fareast;<br />
	mso-hansi-font-family:Cambria;<br />
	mso-hansi-theme-font:major-latin;<br />
	mso-bidi-font-family:"Times New Roman";<br />
	mso-bidi-theme-font:major-bidi;<br />
	color:#365F91;<br />
	mso-themecolor:accent1;<br />
	mso-themeshade:191;<br />
	mso-font-kerning:1.0pt;}<br />
span.1Char<br />
	{mso-style-name:"标题 1 Char";<br />
	mso-style-priority:9;<br />
	mso-style-unhide:no;<br />
	mso-style-locked:yes;<br />
	mso-style-link:"标题 1";<br />
	mso-ansi-font-size:16.0pt;<br />
	mso-bidi-font-size:14.0pt;<br />
	font-family:"Cambria","serif";<br />
	mso-ascii-font-family:Cambria;<br />
	mso-ascii-theme-font:major-latin;<br />
	mso-fareast-font-family:宋体;<br />
	mso-fareast-theme-font:major-fareast;<br />
	mso-hansi-font-family:Cambria;<br />
	mso-hansi-theme-font:major-latin;<br />
	mso-bidi-font-family:"Times New Roman";<br />
	mso-bidi-theme-font:major-bidi;<br />
	color:#365F91;<br />
	mso-themecolor:accent1;<br />
	mso-themeshade:191;<br />
	font-weight:bold;}<br />
.MsoChpDefault<br />
	{mso-style-type:export-only;<br />
	mso-default-props:yes;<br />
	mso-bidi-font-family:"Times New Roman";<br />
	mso-bidi-theme-font:minor-bidi;}<br />
 /* Page Definitions */<br />
 @page<br />
	{mso-page-border-surround-header:no;<br />
	mso-page-border-surround-footer:no;}<br />
@page Section1<br />
	{size:595.3pt 841.9pt;<br />
	margin:72.0pt 90.0pt 72.0pt 90.0pt;<br />
	mso-header-margin:42.55pt;<br />
	mso-footer-margin:49.6pt;<br />
	mso-paper-source:0;<br />
	layout-grid:15.6pt;}<br />
div.Section1<br />
	{page:Section1;}<br />
--><br />
</style>
<p><!--[if gte mso 10]&gt;<br />
&lt;style&gt;<br />
 /* Style Definitions */<br />
 table.MsoNormalTable<br />
	{mso-style-name:普通表格;<br />
	mso-tstyle-rowband-size:0;<br />
	mso-tstyle-colband-size:0;<br />
	mso-style-noshow:yes;<br />
	mso-style-priority:99;<br />
	mso-style-qformat:yes;<br />
	mso-style-parent:"";<br />
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;<br />
	mso-para-margin:0cm;<br />
	mso-para-margin-bottom:.0001pt;<br />
	mso-pagination:widow-orphan;<br />
	font-size:10.5pt;<br />
	mso-bidi-font-size:11.0pt;<br />
	font-family:"Calibri","sans-serif";<br />
	mso-ascii-font-family:Calibri;<br />
	mso-ascii-theme-font:minor-latin;<br />
	mso-hansi-font-family:Calibri;<br />
	mso-hansi-theme-font:minor-latin;<br />
	mso-font-kerning:1.0pt;}<br />
&lt;/style&gt;<br />
&lt;![endif]--></p>
<h1><span style="font-family: 宋体;">数据结构</span> <span style="font-family: 宋体;">链表的</span><span lang="EN-US">lua</span><span style="font-family: 宋体;">实现</span> <span style="font-family: 宋体;">仿照</span><span lang="EN-US">C++</span><span style="font-family: 宋体;">中</span><span lang="EN-US">list </span><span style="font-family: 宋体;">实现</span></h1>
<p class="MsoNormal" style="text-align: right;" align="right"><b><u><span style="font-variant: small-caps; color: rgb(192, 80, 77); letter-spacing: 0.25pt;" lang="EN-US">write by </span></u></b><b><u><span style="font-family: 宋体; font-variant: small-caps; color: rgb(192, 80, 77); letter-spacing: 0.25pt;" lang="EN-US">九天雁翎</span><span style="font-variant: small-caps; color: rgb(192, 80, 77); letter-spacing: 0.25pt;" lang="EN-US">(JTianLing) --<br />
blog.csdn.net/vagrxie</span></u></b></p>
<p class="MsoNormal"><span style="" lang="EN-US">vector</span><span style="font-family: 宋体;">我就没有用</span><span style="" lang="EN-US">lua</span><span style="font-family: 宋体;">实现了，实现个</span><span style="" lang="EN-US">list</span><span style="font-family: 宋体;">就很别扭了。事实上太仿照</span><span style="" lang="EN-US">C++</span><span style="font-family: 宋体;">标准库的</span><span style="" lang="EN-US">list</span><span style="font-family: 宋体;">了，所以可能没有很好的发挥</span><span style="" lang="EN-US">lua</span><span style="font-family: 宋体;">的特点，有点要说的就是，</span><span style="" lang="EN-US">lua</span><span style="font-family: 宋体;">中</span><span style="" lang="EN-US">table</span><span style="font-family: 宋体;">的赋值都是引用赋值的浅拷贝，这点在实现</span><span style="" lang="EN-US">list</span><span style="font-family: 宋体;">的时候发挥了关键作用，不然没有指针的</span><span style="" lang="EN-US">lua</span><span style="font-family: 宋体;">要实现一个列表都成为不可能了：）</span><span style="" lang="EN-US"><o:p></o:p></span></p>
<p class="MsoNormal"><span style="font-family: 宋体;">程序最后还附加了一个符合</span><span style="" lang="EN-US">lua</span><span style="font-family: 宋体;">迭代器特点的迭代器，不然老是用</span><span style="" lang="EN-US">CListIterator</span><span style="font-family: 宋体;">的话，可能都会怀疑自己用的还是不是</span><span style="" lang="EN-US">lua</span><span style="font-family: 宋体;">了，呵呵</span><span style="" lang="EN-US"><o:p></o:p></span></p>
<p class="MsoNormal" style=""><span style="" lang="EN-US">&nbsp;</span><span style="font-family: 宋体;">这里想提出的一点就是</span><span style="" lang="EN-US">lua</span><span style="font-family: 宋体;">中实在是没有一个可用的</span><span style="" lang="EN-US">debug</span><span style="font-family: 宋体;">工具，注意我的措辞，是连一个可用的都没有，更别提好用的了。相对而言</span><span style="" lang="EN-US">C++</span><span style="font-family: 宋体;">有</span><span style="" lang="EN-US">VS+gdb,python</span><span style="font-family: 宋体;">用</span><span style="" lang="EN-US">pydb</span><span style="font-family: 宋体;">，</span><span style="" lang="EN-US">bash</span><span style="font-family: 宋体;">有</span><span style="" lang="EN-US">bashdb,</span><span style="font-family: 宋体;">而</span><span style="" lang="EN-US">lua</span><span style="font-family: 宋体;">什么都没有！</span><span style="" lang="EN-US">lua for windows</span><span style="font-family: 宋体;">的那个</span><span style="" lang="EN-US">scite</span><span style="font-family: 宋体;">别提多不好用了，</span><span style="" lang="EN-US">clidebug,xdblua, RemDebug</span><span style="font-family: 宋体;">等等我都用过，甚至官网提到的几个</span><span style="" lang="EN-US">IDE</span><span style="font-family: 宋体;">我都试用了一下，通通的不能用，可能是因为</span><span style="" lang="EN-US">lua</span><span style="font-family: 宋体;">升级了的原因（记得</span><span style="" lang="EN-US">scite</span><span style="font-family: 宋体;">在原来是可用的），郁闷死我了。作为一个两百多行的</span><span style="" lang="EN-US">list</span><span style="font-family: 宋体;">代码，没有一个可用的调试工具，简直就是噩梦（也许没有那么夸张，但是的确浪费了我很多本来简单调试就可以发下你的问题），唉。。。。。在没有好用的</span><span style="" lang="EN-US">lua</span><span style="font-family: 宋体;">调试工具之前，我甚至都有点不想给自己找罪受了。再也不写太多的</span><span style="" lang="EN-US">lua</span><span style="font-family: 宋体;">代码了。最多在小程序中用</span><span style="" lang="EN-US">print</span><span style="font-family: 宋体;">和</span><span style="" lang="EN-US">assert</span><span style="font-family: 宋体;">勉强写写吧。其实感觉</span><span style="" lang="EN-US">lua</span><span style="font-family: 宋体;">本身对于调试的支持是很到位的了，为什么却没有好用的工具呢？唉。。。。。。。。。。这就是普及的好处了。。。。。真有时间，哥们自己</span><span style="" lang="EN-US">DIY</span><span style="font-family: 宋体;">一个用用算了。</span></p>
<p class="MsoNormal" style=""></p>
<p class="MsoNormal" style="">-----在对lua的调试工具不再抱希望的时候，调整了一下lua的PATH设置，随便折腾了一下scite,结果又可以正常调试了，faint.............有的时候就是这么莫名奇妙，我折腾了3天（准确的是3天的晚上），试了n种工具，结果都有问题，结果今天莫名奇妙就好了，谁说的来着，你编的认为已经没有bug的软件总会在某一天莫名崩溃。。。。这一点在工作以来我是深有体会了，问题是，某个有bug，已经不能正常运行的软件怎么在某一天莫名的好了呢？。。。。呵呵。</p>
<p class="MsoNormal" style="">总之，还是对lua的调试工具不满，起码，没有能够让我能用putty挂在linux下好好调试的工具：）总不能每次在那边写完都考回来在windows下调试吧？。。。（现在好像也只能这样了）<br /><span style="font-family: 宋体;"></span><span style="" lang="EN-US"><o:p></o:p></span></p>
<p class="MsoNormal"><span style="" lang="EN-US"><o:p>&nbsp;</o:p></span></p>
<p class="MsoNormal"><span style='font-family: "Courier New"; color: rgb(128, 64, 64);' lang="EN-US">&nbsp;&nbsp;</span><span style='font-family: "Courier New"; color: rgb(128, 64, 64);' lang="EN-US">1 </span><span style='font-family: "Courier New"; color: blue;' lang="EN-US">#!/usr/bin/env lua</span><span style='font-family: "Courier New";' lang="EN-US"><br />
<span style="color: rgb(128, 64, 64);">&nbsp;&nbsp;2 </span><br />
<span style="color: rgb(128, 64, 64);">&nbsp;&nbsp;3 </span><span style="color: blue;">--<br />
require "std"</span><br />
<span style="color: rgb(128, 64, 64);">&nbsp;&nbsp;4 </span><br />
<span style="color: rgb(128, 64, 64);">&nbsp;&nbsp;5 </span><span style="color: blue;">--<br />
Node prototype</span><br />
<span style="color: rgb(128, 64, 64);">&nbsp;&nbsp;6 </span>CNode = <b><span style="color: seagreen;">{}</span></b><br />
<span style="color: rgb(128, 64, 64);">&nbsp;&nbsp;7 </span><span style="color: teal;">function</span>&nbsp;CNode:New(data,<br />
prev, <span style="color: teal;">next</span>)<br />
<span style="color: rgb(128, 64, 64);">&nbsp;&nbsp;8 </span>&nbsp;&nbsp;&nbsp;&nbsp;<b><span style="color: rgb(128, 64, 64);">local</span></b>&nbsp;o = <b><span style="color: seagreen;">{}</span></b><br />
<span style="color: rgb(128, 64, 64);">&nbsp;&nbsp;9 </span>&nbsp;&nbsp;&nbsp;&nbsp;o.data<br />
= data<br />
<span style="color: rgb(128, 64, 64);">&nbsp;10 </span>&nbsp;&nbsp;&nbsp;&nbsp;o.prev =<br />
prev<br />
<span style="color: rgb(128, 64, 64);">&nbsp;11 </span>&nbsp;&nbsp;&nbsp;&nbsp;o.<span style="color: teal;">next</span>&nbsp;= <span style="color: teal;">next</span><br />
<span style="color: rgb(128, 64, 64);">&nbsp;12 </span>&nbsp;&nbsp;&nbsp;&nbsp;o.<span style="color: teal;">type</span>&nbsp;= <span style="color: fuchsia;">"CNode"</span><br />
<span style="color: rgb(128, 64, 64);">&nbsp;13 </span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: teal;">setmetatable</span>(o, self)<br />
<span style="color: rgb(128, 64, 64);">&nbsp;14 </span>&nbsp;&nbsp;&nbsp;&nbsp;self.__index<br />
= self<br />
<span style="color: rgb(128, 64, 64);">&nbsp;15 </span>&nbsp;&nbsp;&nbsp;&nbsp;<b><span style="color: rgb(128, 64, 64);">return</span></b>&nbsp;o<br />
<span style="color: rgb(128, 64, 64);">&nbsp;16 </span><span style="color: teal;">end</span><br />
<span style="color: rgb(128, 64, 64);">&nbsp;17 </span><br />
<span style="color: rgb(128, 64, 64);">&nbsp;18 </span><span style="color: blue;">--<br />
iterator of list prototype like in C++</span><br />
<span style="color: rgb(128, 64, 64);">&nbsp;19 </span>CListIterator = <b><span style="color: seagreen;">{}</span></b><br />
<span style="color: rgb(128, 64, 64);">&nbsp;20 </span><span style="color: teal;">function</span>&nbsp;CListIterator:New(a)<br />
<span style="color: rgb(128, 64, 64);">&nbsp;21 </span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: teal;">assert</span>(a ~= <span style="color: fuchsia;">nil</span>&nbsp;<b><span style="color: rgb(128, 64, 64);">and</span></b>&nbsp;<br />
<span style="color: rgb(128, 64, 64);">&nbsp;22 </span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: teal;">type</span>(a) == <span style="color: fuchsia;">"table"</span>&nbsp;<b><span style="color: rgb(128, 64, 64);">and</span></b>&nbsp;<br />
<span style="color: rgb(128, 64, 64);">&nbsp;23 </span>&nbsp;&nbsp;&nbsp;&nbsp;a.<span style="color: teal;">type</span>&nbsp;~= <span style="color: fuchsia;">nil</span>&nbsp;<b><span style="color: rgb(128, 64, 64);">and</span></b><br />
<span style="color: rgb(128, 64, 64);">&nbsp;24 </span>&nbsp;&nbsp;&nbsp;&nbsp;((a.<span style="color: teal;">type</span>&nbsp;== <span style="color: fuchsia;">"CList"</span>)<br />
<b><span style="color: rgb(128, 64, 64);">or</span></b>&nbsp;(a.<span style="color: teal;">type</span>&nbsp;==<br />
<span style="color: fuchsia;">"CNode"</span>)),<br />
<span style="color: rgb(128, 64, 64);">&nbsp;25 </span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: fuchsia;">"Argument to new a CListIterator must be a CList<br />
object or a CNode object"</span>)<br />
<span style="color: rgb(128, 64, 64);">&nbsp;26 </span>&nbsp;&nbsp;&nbsp;&nbsp;<br />
<span style="color: rgb(128, 64, 64);">&nbsp;27 </span>&nbsp;&nbsp;&nbsp;&nbsp;<b><span style="color: rgb(128, 64, 64);">local</span></b>&nbsp;o = <b><span style="color: seagreen;">{}</span></b><br />
<span style="color: rgb(128, 64, 64);">&nbsp;28 </span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue;">-- give it a type name</span><br />
<span style="color: rgb(128, 64, 64);">&nbsp;29 </span>&nbsp;&nbsp;&nbsp;&nbsp;o.<span style="color: teal;">type</span>&nbsp;= <span style="color: fuchsia;">"CListIterator"</span><br />
<span style="color: rgb(128, 64, 64);">&nbsp;30 </span><br />
<span style="color: rgb(128, 64, 64);">&nbsp;31 </span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue;">-- if a is a CList object then create a begin iterator for<br />
the object</span><br />
<span style="color: rgb(128, 64, 64);">&nbsp;32 </span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue;">-- if a is a CNode object then return a iterator point to<br />
the node</span><br />
<span style="color: rgb(128, 64, 64);">&nbsp;33 </span>&nbsp;&nbsp;&nbsp;&nbsp;<b><span style="color: rgb(128, 64, 64);">if</span></b>&nbsp;a.<span style="color: teal;">type</span>&nbsp;==<br />
<span style="color: fuchsia;">"CList"</span>&nbsp;<b><span style="color: rgb(128, 64, 64);">then</span></b><br />
<span style="color: rgb(128, 64, 64);">&nbsp;34 </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;o.pos<br />
= a.head.<span style="color: teal;">next</span><br />
<span style="color: rgb(128, 64, 64);">&nbsp;35 </span>&nbsp;&nbsp;&nbsp;&nbsp;<b><span style="color: rgb(128, 64, 64);">elseif</span></b>&nbsp;a.<span style="color: teal;">type</span>&nbsp;==<br />
<span style="color: fuchsia;">"CNode"</span>&nbsp;<b><span style="color: rgb(128, 64, 64);">then</span></b><br />
<span style="color: rgb(128, 64, 64);">&nbsp;36 </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;o.pos<br />
= a<br />
<span style="color: rgb(128, 64, 64);">&nbsp;37 </span>&nbsp;&nbsp;&nbsp;&nbsp;<b><span style="color: rgb(128, 64, 64);">end</span></b><br />
<span style="color: rgb(128, 64, 64);">&nbsp;38 </span><br />
<span style="color: rgb(128, 64, 64);">&nbsp;39 </span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: teal;">setmetatable</span>(o, self)<br />
<span style="color: rgb(128, 64, 64);">&nbsp;40 </span>&nbsp;&nbsp;&nbsp;&nbsp;self.__index<br />
= self<br />
<span style="color: rgb(128, 64, 64);">&nbsp;41 </span>&nbsp;&nbsp;&nbsp;&nbsp;<b><span style="color: rgb(128, 64, 64);">return</span></b>&nbsp;o<br />
<span style="color: rgb(128, 64, 64);">&nbsp;42 </span><span style="color: teal;">end</span><br />
<span style="color: rgb(128, 64, 64);">&nbsp;43 </span><br />
<span style="color: rgb(128, 64, 64);">&nbsp;44 </span><span style="color: teal;">function</span>&nbsp;CListIterator:IsEnd()<br />
<span style="color: rgb(128, 64, 64);">&nbsp;45 </span>&nbsp;&nbsp;&nbsp;&nbsp;<b><span style="color: rgb(128, 64, 64);">return</span></b>&nbsp;<b><span style="color: rgb(128, 64, 64);">not</span></b>&nbsp;self.pos.data<br />
<span style="color: rgb(128, 64, 64);">&nbsp;46 </span><span style="color: teal;">end</span><br />
<span style="color: rgb(128, 64, 64);">&nbsp;47 </span><br />
<span style="color: rgb(128, 64, 64);">&nbsp;48 </span><span style="color: teal;">function</span>&nbsp;CListIterator:Cur()<br />
<span style="color: rgb(128, 64, 64);">&nbsp;49 </span>&nbsp;&nbsp;&nbsp;&nbsp;<b><span style="color: rgb(128, 64, 64);">return</span></b>&nbsp;self.pos<br />
<span style="color: rgb(128, 64, 64);">&nbsp;50 </span><span style="color: teal;">end</span><br />
<span style="color: rgb(128, 64, 64);">&nbsp;51 </span><br />
<span style="color: rgb(128, 64, 64);">&nbsp;52 </span><span style="color: teal;">function</span>&nbsp;CListIterator:MoveNext()<br />
<span style="color: rgb(128, 64, 64);">&nbsp;53 </span>&nbsp;&nbsp;&nbsp;&nbsp;self.pos =<br />
self.pos.<span style="color: teal;">next</span><br />
<span style="color: rgb(128, 64, 64);">&nbsp;54 </span>&nbsp;&nbsp;&nbsp;&nbsp;<b><span style="color: rgb(128, 64, 64);">return</span></b>&nbsp;self<br />
<span style="color: rgb(128, 64, 64);">&nbsp;55 </span><span style="color: teal;">end</span><br />
<span style="color: rgb(128, 64, 64);">&nbsp;56 </span><br />
<span style="color: rgb(128, 64, 64);">&nbsp;57 </span><span style="color: teal;">function</span>&nbsp;CListIterator:MovePrev()<br />
<span style="color: rgb(128, 64, 64);">&nbsp;58 </span>&nbsp;&nbsp;&nbsp;&nbsp;self.pos =<br />
self.pos.prev<br />
<span style="color: rgb(128, 64, 64);">&nbsp;59 </span>&nbsp;&nbsp;&nbsp;&nbsp;<b><span style="color: rgb(128, 64, 64);">return</span></b>&nbsp;self<br />
<span style="color: rgb(128, 64, 64);">&nbsp;60 </span><span style="color: teal;">end</span><br />
<span style="color: rgb(128, 64, 64);">&nbsp;61 </span><br />
<span style="color: rgb(128, 64, 64);">&nbsp;62 </span><span style="color: blue;">-- List<br />
prototype</span><br />
<span style="color: rgb(128, 64, 64);">&nbsp;63 </span>CList = <b><span style="color: seagreen;">{}</span></b><br />
<span style="color: rgb(128, 64, 64);">&nbsp;64 </span><span style="color: teal;">function</span>&nbsp;CList:CreateIterator()<br />
<span style="color: rgb(128, 64, 64);">&nbsp;65 </span>&nbsp;&nbsp;&nbsp;&nbsp;<b><span style="color: rgb(128, 64, 64);">return</span></b>&nbsp;CListIterator:New(self)<br />
<span style="color: rgb(128, 64, 64);">&nbsp;66 </span><span style="color: teal;">end</span><br />
<span style="color: rgb(128, 64, 64);">&nbsp;67 </span><br />
<span style="color: rgb(128, 64, 64);">&nbsp;68 </span><span style="color: teal;">function</span>&nbsp;CList:New()<br />
<span style="color: rgb(128, 64, 64);">&nbsp;69 </span>&nbsp;&nbsp;&nbsp;&nbsp;<b><span style="color: rgb(128, 64, 64);">local</span></b>&nbsp;o = <b><span style="color: seagreen;">{}</span></b><br />
<span style="color: rgb(128, 64, 64);">&nbsp;70 </span>&nbsp;&nbsp;&nbsp;&nbsp;o.head =<br />
CNode:New()<br />
<span style="color: rgb(128, 64, 64);">&nbsp;71 </span>&nbsp;&nbsp;&nbsp;&nbsp;o.head.prev<br />
= o.head<br />
<span style="color: rgb(128, 64, 64);">&nbsp;72 </span>&nbsp;&nbsp;&nbsp;&nbsp;o.head.<span style="color: teal;">next</span>&nbsp;= o.head<br />
<span style="color: rgb(128, 64, 64);">&nbsp;73 </span><br />
<span style="color: rgb(128, 64, 64);">&nbsp;74 </span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue;">-- give it a type def</span><br />
<span style="color: rgb(128, 64, 64);">&nbsp;75 </span>&nbsp;&nbsp;&nbsp;&nbsp;o.<span style="color: teal;">type</span>&nbsp;= <span style="color: fuchsia;">"CList"</span><br />
<span style="color: rgb(128, 64, 64);">&nbsp;76 </span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: teal;">setmetatable</span>(o, self)<br />
<span style="color: rgb(128, 64, 64);">&nbsp;77 </span>&nbsp;&nbsp;&nbsp;&nbsp;self.__index<br />
= self<br />
<span style="color: rgb(128, 64, 64);">&nbsp;78 </span>&nbsp;&nbsp;&nbsp;&nbsp;<b><span style="color: rgb(128, 64, 64);">return</span></b>&nbsp;o<br />
<span style="color: rgb(128, 64, 64);">&nbsp;79 </span><span style="color: teal;">end</span><br />
<span style="color: rgb(128, 64, 64);">&nbsp;80 </span><br />
<span style="color: rgb(128, 64, 64);">&nbsp;81 </span><span style="color: teal;">function</span>&nbsp;CList:Insert(it,<br />
data)<br />
<span style="color: rgb(128, 64, 64);">&nbsp;82 </span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: teal;">assert</span>(it ~= <span style="color: fuchsia;">nil</span>, <span style="color: fuchsia;">"Must pointer where to Insert"</span>)<br />
<span style="color: rgb(128, 64, 64);">&nbsp;83 </span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: teal;">assert</span>(<span style="color: teal;">type</span>(it) == <span style="color: fuchsia;">"table"</span>, <span style="color: fuchsia;">"Fisrt<br />
Argument must be a CListIterator(now it even not a table)"</span>)<br />
<span style="color: rgb(128, 64, 64);">&nbsp;84 </span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: teal;">assert</span>(<span style="color: teal;">type</span>&nbsp;~= <span style="color: fuchsia;">nil</span>, <span style="color: fuchsia;">"Fisrt<br />
Argument must be a CListIterator(now it.type == nil)"</span>)<br />
<span style="color: rgb(128, 64, 64);">&nbsp;85 </span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: teal;">assert</span>(it.<span style="color: teal;">type</span>&nbsp;==<br />
<span style="color: fuchsia;">"CListIterator"</span>, <span style="color: fuchsia;">"Fisrt Argument must be a CListIterator"</span>)<br />
<span style="color: rgb(128, 64, 64);">&nbsp;86 </span><br />
<span style="color: rgb(128, 64, 64);">&nbsp;87 </span>&nbsp;&nbsp;&nbsp;&nbsp;<b><span style="color: rgb(128, 64, 64);">local</span></b>&nbsp;iter = CListIterator:New(self)<br />
<span style="color: rgb(128, 64, 64);">&nbsp;88 </span>&nbsp;&nbsp;&nbsp;&nbsp;<b><span style="color: rgb(128, 64, 64);">local</span></b>&nbsp;node = CNode:New(data, it.pos.prev,<br />
it.pos)<br />
<span style="color: rgb(128, 64, 64);">&nbsp;89 </span>&nbsp;&nbsp;&nbsp;&nbsp;it.pos.prev.<span style="color: teal;">next</span>&nbsp;= node<br />
<span style="color: rgb(128, 64, 64);">&nbsp;90 </span>&nbsp;&nbsp;&nbsp;&nbsp;it.pos.prev<br />
= node<br />
<span style="color: rgb(128, 64, 64);">&nbsp;91 </span>&nbsp;&nbsp;&nbsp;&nbsp;<b><span style="color: rgb(128, 64, 64);">return</span></b>&nbsp;CListIterator:New(node)<br />
<span style="color: rgb(128, 64, 64);">&nbsp;92 </span><span style="color: teal;">end</span><br />
<span style="color: rgb(128, 64, 64);">&nbsp;93 </span><br />
<span style="color: rgb(128, 64, 64);">&nbsp;94 </span><span style="color: teal;">function</span>&nbsp;CList:Begin()<br />
<span style="color: rgb(128, 64, 64);">&nbsp;95 </span>&nbsp;&nbsp;&nbsp;&nbsp;<b><span style="color: rgb(128, 64, 64);">return</span></b>&nbsp;self:CreateIterator()<br />
<span style="color: rgb(128, 64, 64);">&nbsp;96 </span><span style="color: teal;">end</span><br />
<span style="color: rgb(128, 64, 64);">&nbsp;97 </span><br />
<span style="color: rgb(128, 64, 64);">&nbsp;98 </span><span style="color: teal;">function</span>&nbsp;CList:End()<br />
<span style="color: rgb(128, 64, 64);">&nbsp;99 </span>&nbsp;&nbsp;&nbsp;&nbsp;<b><span style="color: rgb(128, 64, 64);">return</span></b>&nbsp;CListIterator:New(self.head)<br />
<span style="color: rgb(128, 64, 64);">100 </span><span style="color: teal;">end</span><br />
<span style="color: rgb(128, 64, 64);">101 </span><br />
<span style="color: rgb(128, 64, 64);">102 </span><br />
<span style="color: rgb(128, 64, 64);">103 </span><span style="color: teal;">function</span>&nbsp;CList:PushFront(data)<br />
<span style="color: rgb(128, 64, 64);">104 </span>&nbsp;&nbsp;&nbsp;&nbsp;self:Insert(self:Begin(),<br />
data)<br />
<span style="color: rgb(128, 64, 64);">105 </span><span style="color: teal;">end</span><br />
<span style="color: rgb(128, 64, 64);">106 </span><br />
<span style="color: rgb(128, 64, 64);">107 </span><span style="color: teal;">function</span>&nbsp;CList:PushBack(data)<br />
<span style="color: rgb(128, 64, 64);">108 </span>&nbsp;&nbsp;&nbsp;&nbsp;self:Insert(self:End(),<br />
data)<br />
<span style="color: rgb(128, 64, 64);">109 </span><span style="color: teal;">end</span><br />
<span style="color: rgb(128, 64, 64);">110 </span><br />
<span style="color: rgb(128, 64, 64);">111 </span><span style="color: teal;">function</span>&nbsp;CList:IsEmpty()<br />
<span style="color: rgb(128, 64, 64);">112 </span>&nbsp;&nbsp;&nbsp;&nbsp;<b><span style="color: rgb(128, 64, 64);">return</span></b>&nbsp;self:Begin().pos == self:End().pos<br />
<span style="color: rgb(128, 64, 64);">113 </span><span style="color: teal;">end</span><br />
<span style="color: rgb(128, 64, 64);">114 </span><br />
<span style="color: rgb(128, 64, 64);">115 </span><span style="color: teal;">function</span>&nbsp;CList:Erase(it)<br />
<span style="color: rgb(128, 64, 64);">116 </span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: teal;">assert</span>(<b><span style="color: rgb(128, 64, 64);">not</span></b>&nbsp;it.data,<br />
<span style="color: fuchsia;">"you can't erase the head"</span>)<br />
<span style="color: rgb(128, 64, 64);">117 </span>&nbsp;&nbsp;&nbsp;&nbsp;it.pos.prev.<span style="color: teal;">next</span>&nbsp;= it.pos.<span style="color: teal;">next</span><br />
<span style="color: rgb(128, 64, 64);">118 </span>&nbsp;&nbsp;&nbsp;&nbsp;it.pos.<span style="color: teal;">next</span>.prev = it.pos.prev<br />
<span style="color: rgb(128, 64, 64);">119 </span>&nbsp;&nbsp;&nbsp;&nbsp;it = <span style="color: fuchsia;">nil</span><br />
<span style="color: rgb(128, 64, 64);">120 </span><span style="color: teal;">end</span><br />
<span style="color: rgb(128, 64, 64);">121 </span><br />
<span style="color: rgb(128, 64, 64);">122 </span><span style="color: teal;">function</span>&nbsp;CList:PopFront()<br />
<span style="color: rgb(128, 64, 64);">123 </span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: teal;">assert</span>(<b><span style="color: rgb(128, 64, 64);">not</span></b>&nbsp;self:IsEmpty(),<br />
<span style="color: fuchsia;">"Can't PopFront to a Empty list"</span>)<br />
<span style="color: rgb(128, 64, 64);">124 </span>&nbsp;&nbsp;&nbsp;&nbsp;self:Erase(self:Begin())<br />
<span style="color: rgb(128, 64, 64);">125 </span><span style="color: teal;">end</span><br />
<span style="color: rgb(128, 64, 64);">126 </span><br />
<span style="color: rgb(128, 64, 64);">127 </span><span style="color: teal;">function</span>&nbsp;CList:PopBack()<br />
<span style="color: rgb(128, 64, 64);">128 </span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: teal;">assert</span>(<b><span style="color: rgb(128, 64, 64);">not</span></b>&nbsp;self:IsEmpty(),<br />
<span style="color: fuchsia;">"Can't PopBack to a Empty list"</span>)<br />
<span style="color: rgb(128, 64, 64);">129 </span>&nbsp;&nbsp;&nbsp;&nbsp;self:Erase(self:End():MovePrev())<br />
<span style="color: rgb(128, 64, 64);">130 </span><span style="color: teal;">end</span><br />
<span style="color: rgb(128, 64, 64);">131 </span><br />
<span style="color: rgb(128, 64, 64);">132 </span><span style="color: teal;">function</span>&nbsp;CList:Clear()<br />
<span style="color: rgb(128, 64, 64);">133 </span>&nbsp;&nbsp;&nbsp;&nbsp;<b><span style="color: rgb(128, 64, 64);">while</span></b>&nbsp;<b><span style="color: rgb(128, 64, 64);">not</span></b>&nbsp;self:IsEmpty()<br />
<b><span style="color: rgb(128, 64, 64);">do</span></b><br />
<span style="color: rgb(128, 64, 64);">134 </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self:Erase(self:Begin())<br />
<span style="color: rgb(128, 64, 64);">135 </span>&nbsp;&nbsp;&nbsp;&nbsp;<b><span style="color: rgb(128, 64, 64);">end</span></b><br />
<span style="color: rgb(128, 64, 64);">136 </span><span style="color: teal;">end</span><br />
<span style="color: rgb(128, 64, 64);">137 </span><br />
<span style="color: rgb(128, 64, 64);">138 </span><span style="color: blue;">-- redefine<br />
global print to support the CList</span><br />
<span style="color: rgb(128, 64, 64);">139 </span>p = <span style="color: teal;">_G</span>.<span style="color: teal;">print</span><br />
<span style="color: rgb(128, 64, 64);">140 </span><span style="color: teal;">function</span>&nbsp;<span style="color: teal;">print</span>(o)<br />
<span style="color: rgb(128, 64, 64);">141 </span>&nbsp;&nbsp;&nbsp;&nbsp;<b><span style="color: rgb(128, 64, 64);">if</span></b>&nbsp;o ~= <span style="color: fuchsia;">nil</span>&nbsp;<b><span style="color: rgb(128, 64, 64);">and</span></b>&nbsp;<span style="color: teal;">type</span>(o)<br />
== <span style="color: fuchsia;">"table"</span>&nbsp;<b><span style="color: rgb(128, 64, 64);">and</span></b>&nbsp;<br />
<span style="color: rgb(128, 64, 64);">142 </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;o.<span style="color: teal;">type</span>&nbsp;~= <span style="color: fuchsia;">nil</span>&nbsp;<b><span style="color: rgb(128, 64, 64);">and</span></b>&nbsp;o.<span style="color: teal;">type</span>&nbsp;==<br />
<span style="color: fuchsia;">"CList"</span>&nbsp;<b><span style="color: rgb(128, 64, 64);">then</span></b><br />
<span style="color: rgb(128, 64, 64);">143 </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue;">-- iterate like in C++ using CList and CListIterator feature</span><br />
<span style="color: rgb(128, 64, 64);">144 </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span style="color: rgb(128, 64, 64);">local</span></b>&nbsp;it = o:CreateIterator()<br />
<span style="color: rgb(128, 64, 64);">145 </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span style="color: rgb(128, 64, 64);">while</span></b>&nbsp;<b><span style="color: rgb(128, 64, 64);">not</span></b>&nbsp;it:IsEnd()<br />
<b><span style="color: rgb(128, 64, 64);">do</span></b><br />
<span style="color: rgb(128, 64, 64);">146 </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: teal;">io.write</span>(it:Cur().data)<br />
<span style="color: rgb(128, 64, 64);">147 </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: teal;">io.write</span>(<span style="color: fuchsia;">" "</span>)<br />
<span style="color: rgb(128, 64, 64);">148 </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;it:MoveNext()<br />
<span style="color: rgb(128, 64, 64);">149 </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span style="color: rgb(128, 64, 64);">end</span></b><br />
<span style="color: rgb(128, 64, 64);">150 </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: teal;">io.write</span>(<span style="color: fuchsia;">"</span><span style="color: slateblue;">/n</span><span style="color: fuchsia;">"</span>)<br />
<span style="color: rgb(128, 64, 64);">151 </span>&nbsp;&nbsp;&nbsp;&nbsp;<b><span style="color: rgb(128, 64, 64);">else</span></b><br />
<span style="color: rgb(128, 64, 64);">152 </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p(o)<br />
<span style="color: rgb(128, 64, 64);">153 </span>&nbsp;&nbsp;&nbsp;&nbsp;<b><span style="color: rgb(128, 64, 64);">end</span></b><br />
<span style="color: rgb(128, 64, 64);">154 </span><span style="color: teal;">end</span><br />
<span style="color: rgb(128, 64, 64);">155 </span><br />
<span style="color: rgb(128, 64, 64);">156 </span><span style="color: blue;">-- test<br />
PushFront</span><br />
<span style="color: rgb(128, 64, 64);">157 </span><span style="color: teal;">print</span>(<span style="color: fuchsia;">"</span><span style="color: slateblue;">/n</span><span style="color: fuchsia;">test: test PushFront and PopFront"</span>)<br />
<span style="color: rgb(128, 64, 64);">158 </span>newlist = CList:New()<br />
<span style="color: rgb(128, 64, 64);">159 </span>newlist:PushFront(<span style="color: fuchsia;">10</span>)<br />
<span style="color: rgb(128, 64, 64);">160 </span><span style="color: teal;">print</span>(newlist)<br />
<span style="color: rgb(128, 64, 64);">161 </span>newlist:PushFront(<span style="color: fuchsia;">20</span>)<br />
<span style="color: rgb(128, 64, 64);">162 </span><span style="color: teal;">print</span>(newlist)<br />
<span style="color: rgb(128, 64, 64);">163 </span>newlist:PushFront(<span style="color: fuchsia;">30</span>)<br />
<span style="color: rgb(128, 64, 64);">164 </span><span style="color: teal;">print</span>(newlist)<br />
<span style="color: rgb(128, 64, 64);">165 </span>newlist:PopFront()<br />
<span style="color: rgb(128, 64, 64);">166 </span><span style="color: teal;">print</span>(newlist)<br />
<span style="color: rgb(128, 64, 64);">167 </span>it = newlist:CreateIterator()<br />
<span style="color: rgb(128, 64, 64);">168 </span>newlist:Erase(it)<br />
<span style="color: rgb(128, 64, 64);">169 </span><span style="color: teal;">print</span>(newlist)<br />
<span style="color: rgb(128, 64, 64);">170 </span>newlist:Clear()<br />
<span style="color: rgb(128, 64, 64);">171 </span><span style="color: teal;">print</span>(newlist)<br />
<span style="color: rgb(128, 64, 64);">172 </span><br />
<span style="color: rgb(128, 64, 64);">173 </span><br />
<span style="color: rgb(128, 64, 64);">174 </span><span style="color: blue;">-- test<br />
PushBack</span><br />
<span style="color: rgb(128, 64, 64);">175 </span><span style="color: teal;">print</span>(<span style="color: fuchsia;">"</span><span style="color: slateblue;">/n</span><span style="color: fuchsia;">test: test PushBack and popBack"</span>)<br />
<span style="color: rgb(128, 64, 64);">176 </span>newlist = CList:New()<br />
<span style="color: rgb(128, 64, 64);">177 </span>newlist:PushBack(<span style="color: fuchsia;">10</span>)<br />
<span style="color: rgb(128, 64, 64);">178 </span><span style="color: teal;">print</span>(newlist)<br />
<span style="color: rgb(128, 64, 64);">179 </span>newlist:PushBack(<span style="color: fuchsia;">20</span>)<br />
<span style="color: rgb(128, 64, 64);">180 </span><span style="color: teal;">print</span>(newlist)<br />
<span style="color: rgb(128, 64, 64);">181 </span>newlist:PushBack(<span style="color: fuchsia;">30</span>)<br />
<span style="color: rgb(128, 64, 64);">182 </span><span style="color: teal;">print</span>(newlist)<br />
<span style="color: rgb(128, 64, 64);">183 </span>newlist:PopBack()<br />
<span style="color: rgb(128, 64, 64);">184 </span><span style="color: teal;">print</span>(newlist)<br />
<span style="color: rgb(128, 64, 64);">185 </span>newlist:PopFront()<br />
<span style="color: rgb(128, 64, 64);">186 </span><span style="color: teal;">print</span>(newlist)<br />
<span style="color: rgb(128, 64, 64);">187 </span><br />
<span style="color: rgb(128, 64, 64);">188 </span><br />
<span style="color: rgb(128, 64, 64);">189 </span><span style="color: blue;">-- test: insert<br />
at begin</span><br />
<span style="color: rgb(128, 64, 64);">190 </span><span style="color: teal;">print</span>(<span style="color: fuchsia;">"</span><span style="color: slateblue;">/n</span><span style="color: fuchsia;">test: insert at begin "</span>)<br />
<span style="color: rgb(128, 64, 64);">191 </span>newlist = CList:New()<br />
<span style="color: rgb(128, 64, 64);">192 </span>it = newlist:CreateIterator()<br />
<span style="color: rgb(128, 64, 64);">193 </span>iter = newlist:Insert(it, <span style="color: fuchsia;">10</span>);<br />
<span style="color: rgb(128, 64, 64);">194 </span><span style="color: teal;">io.write</span>(<span style="color: fuchsia;">"cur iterator:"</span>&nbsp;..&nbsp;&nbsp;<span style="color: teal;">tostring</span>(it.pos.data) .. <span style="color: fuchsia;">"<br />
return iterator:"</span>&nbsp;.. <span style="color: teal;">tostring</span>(iter.pos.data)<br />
.. <span style="color: fuchsia;">"</span><span style="color: slateblue;">/n</span><span style="color: fuchsia;">"</span>)<br />
<span style="color: rgb(128, 64, 64);">195 </span><span style="color: teal;">print</span>(newlist)<br />
<span style="color: rgb(128, 64, 64);">196 </span>iter = newlist:Insert(it, <span style="color: fuchsia;">20</span>);<br />
<span style="color: rgb(128, 64, 64);">197 </span><span style="color: teal;">io.write</span>(<span style="color: fuchsia;">"cur iterator:"</span>&nbsp;..&nbsp;&nbsp;<span style="color: teal;">tostring</span>(it.pos.data) .. <span style="color: fuchsia;">"<br />
return iterator:"</span>&nbsp;.. <span style="color: teal;">tostring</span>(iter.pos.data)<br />
.. <span style="color: fuchsia;">"</span><span style="color: slateblue;">/n</span><span style="color: fuchsia;">"</span>)<br />
<span style="color: rgb(128, 64, 64);">198 </span><span style="color: teal;">print</span>(newlist)<br />
<span style="color: rgb(128, 64, 64);">199 </span>iter = newlist:Insert(it, <span style="color: fuchsia;">30</span>);<br />
<span style="color: rgb(128, 64, 64);">200 </span><span style="color: teal;">io.write</span>(<span style="color: fuchsia;">"cur iterator:"</span>&nbsp;..&nbsp;&nbsp;<span style="color: teal;">tostring</span>(it.pos.data) .. <span style="color: fuchsia;">"<br />
return iterator:"</span>&nbsp;.. <span style="color: teal;">tostring</span>(iter.pos.data)<br />
.. <span style="color: fuchsia;">"</span><span style="color: slateblue;">/n</span><span style="color: fuchsia;">"</span>)<br />
<span style="color: rgb(128, 64, 64);">201 </span><span style="color: teal;">print</span>(newlist)<br />
<span style="color: rgb(128, 64, 64);">202 </span><br />
<span style="color: rgb(128, 64, 64);">203 </span><span style="color: blue;">-- test: insert<br />
at back</span><br />
<span style="color: rgb(128, 64, 64);">204 </span><span style="color: teal;">print</span>(<span style="color: fuchsia;">"</span><span style="color: slateblue;">/n</span><span style="color: fuchsia;">test: insert at back"</span>)<br />
<span style="color: rgb(128, 64, 64);">205 </span>newlist = CList:New()<br />
<span style="color: rgb(128, 64, 64);">206 </span>it = newlist:CreateIterator()<br />
<span style="color: rgb(128, 64, 64);">207 </span>it = newlist:Insert(it, <span style="color: fuchsia;">10</span>);<br />
<span style="color: rgb(128, 64, 64);">208 </span><span style="color: teal;">io.write</span>(<span style="color: fuchsia;">"cur iterator:"</span>&nbsp;..&nbsp;&nbsp;<span style="color: teal;">tostring</span>(it.pos.data)..<span style="color: fuchsia;">"</span><span style="color: slateblue;">/n</span><span style="color: fuchsia;">"</span>)<br />
<span style="color: rgb(128, 64, 64);">209 </span>it = newlist:Insert(it, <span style="color: fuchsia;">20</span>);<br />
<span style="color: rgb(128, 64, 64);">210 </span><span style="color: teal;">io.write</span>(<span style="color: fuchsia;">"cur iterator:"</span>&nbsp;..&nbsp;&nbsp;<span style="color: teal;">tostring</span>(it.pos.data)..<span style="color: fuchsia;">"</span><span style="color: slateblue;">/n</span><span style="color: fuchsia;">"</span>)<br />
<span style="color: rgb(128, 64, 64);">211 </span>it = newlist:Insert(it, <span style="color: fuchsia;">30</span>);<br />
<span style="color: rgb(128, 64, 64);">212 </span><span style="color: teal;">io.write</span>(<span style="color: fuchsia;">"cur iterator:"</span>&nbsp;..&nbsp;&nbsp;<span style="color: teal;">tostring</span>(it.pos.data)..<span style="color: fuchsia;">"</span><span style="color: slateblue;">/n</span><span style="color: fuchsia;">"</span>)<br />
<span style="color: rgb(128, 64, 64);">213 </span><span style="color: teal;">print</span>(newlist)<br />
<span style="color: rgb(128, 64, 64);">214 </span><br />
<span style="color: rgb(128, 64, 64);">215 </span><span style="color: blue;">-- iterate like<br />
in C++</span><br />
<span style="color: rgb(128, 64, 64);">216 </span><span style="color: teal;">print</span>(<span style="color: fuchsia;">"</span><span style="color: slateblue;">/n</span><span style="color: fuchsia;">iterate like in C++"</span>)<br />
<span style="color: rgb(128, 64, 64);">217 </span>it = newlist:CreateIterator()<br />
<span style="color: rgb(128, 64, 64);">218 <b>while</b></span>&nbsp;<b><span style="color: rgb(128, 64, 64);">not</span></b>&nbsp;it:IsEnd() <b><span style="color: rgb(128, 64, 64);">do</span></b><br />
<span style="color: rgb(128, 64, 64);">219 </span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: teal;">io.write</span>(it:Cur().data .. <span style="color: fuchsia;">"<br />
"</span>)<br />
<span style="color: rgb(128, 64, 64);">220 </span>&nbsp;&nbsp;&nbsp;&nbsp;it:MoveNext()<br />
<span style="color: rgb(128, 64, 64);">221 <b>end</b></span><br />
<span style="color: rgb(128, 64, 64);">222 </span><span style="color: teal;">print</span>(<span style="color: fuchsia;">"</span><span style="color: slateblue;">/n</span><span style="color: fuchsia;">"</span>)<br />
<span style="color: rgb(128, 64, 64);">223 </span><br />
<span style="color: rgb(128, 64, 64);">224 </span><span style="color: blue;">-- closure list<br />
iterator to iterate </span><br />
<span style="color: rgb(128, 64, 64);">225 </span><span style="color: teal;">print</span>(<span style="color: fuchsia;">"</span><span style="color: slateblue;">/n</span><span style="color: fuchsia;">closure list iterator to iterate"</span>)<br />
<span style="color: rgb(128, 64, 64);">226 </span><span style="color: teal;">function</span>&nbsp;list_iter(list)<br />
<span style="color: rgb(128, 64, 64);">227 </span>&nbsp;&nbsp;&nbsp;&nbsp;<b><span style="color: rgb(128, 64, 64);">local</span></b>&nbsp;cur = list.head<br />
<span style="color: rgb(128, 64, 64);">228 </span>&nbsp;&nbsp;&nbsp;&nbsp;<b><span style="color: rgb(128, 64, 64);">return</span></b>&nbsp;<span style="color: teal;">function</span>()<br />
<span style="color: rgb(128, 64, 64);">229 </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span style="color: rgb(128, 64, 64);">if</span></b>&nbsp;cur.<span style="color: teal;">next</span>.data<br />
~= <span style="color: fuchsia;">nil</span>&nbsp;<b><span style="color: rgb(128, 64, 64);">then</span></b>&nbsp;<br />
<span style="color: rgb(128, 64, 64);">230 </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cur<br />
= cur.<span style="color: teal;">next</span><br />
<span style="color: rgb(128, 64, 64);">231 </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span style="color: rgb(128, 64, 64);">return</span></b>&nbsp;cur.data<br />
<span style="color: rgb(128, 64, 64);">232 </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><span style="color: rgb(128, 64, 64);">end</span></b><br />
<span style="color: rgb(128, 64, 64);">233 </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: teal;">end</span><br />
<span style="color: rgb(128, 64, 64);">234 </span><span style="color: teal;">end</span><br />
<span style="color: rgb(128, 64, 64);">235 </span><br />
<span style="color: rgb(128, 64, 64);">236 <b>for</b></span>&nbsp;v <b><span style="color: rgb(128, 64, 64);">in</span></b>&nbsp;list_iter(newlist) <b><span style="color: rgb(128, 64, 64);">do</span></b>&nbsp;<br />
<span style="color: rgb(128, 64, 64);">237 </span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: teal;">io.write</span>(v .. <span style="color: fuchsia;">"<br />
"</span>)<br />
<span style="color: rgb(128, 64, 64);">238 <b>end</b></span><br />
<span style="color: rgb(128, 64, 64);">239 </span><br />
<span style="color: rgb(128, 64, 64);">240</span></span><span style='font-family: "Courier New"; color: rgb(160, 32, 240);' lang="EN-US"><o:p></o:p></span></p>
<p class="MsoNormal" align="right"><b><u><span style="font-variant: small-caps; color: rgb(192, 80, 77); letter-spacing: 0.25pt;" lang="EN-US">write by </span></u></b><b><u><span style="font-family: 宋体; font-variant: small-caps; color: rgb(192, 80, 77); letter-spacing: 0.25pt;">九天雁翎</span></u></b><b><u><span style="font-variant: small-caps; color: rgb(192, 80, 77); letter-spacing: 0.25pt;" lang="EN-US">(JTianLing) -- www.jtianling.com</span></u></b><span style="" lang="EN-US"><o:p></o:p></span></p>
<p class="MsoNormal"><span style="" lang="EN-US"><o:p>&nbsp;</o:p></span></p>
